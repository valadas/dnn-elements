{"version":3,"sources":["src/components/dnn-button/dnn-button.scss?tag=dnn-button&encapsulation=shadow","src/components/dnn-button/dnn-button.tsx","src/components/dnn-checkbox/dnn-checkbox.scss?tag=dnn-checkbox&encapsulation=shadow","src/components/dnn-checkbox/dnn-checkbox.tsx","src/components/dnn-chevron/dnn-chevron.scss?tag=dnn-chevron&encapsulation=shadow","src/components/dnn-chevron/dnn-chevron.tsx","src/components/dnn-collapsible/dnn-collapsible.scss?tag=dnn-collapsible&encapsulation=shadow","src/components/dnn-collapsible/dnn-collapsible.tsx","src/utilities/colorInfo.ts","src/components/dnn-color-picker/dnn-color-picker.scss?tag=dnn-color-picker&encapsulation=shadow","src/components/dnn-color-picker/dnn-color-picker.tsx","src/components/dnn-dropzone/dnn-dropzone.scss?tag=dnn-dropzone&encapsulation=shadow","src/components/dnn-dropzone/dnn-dropzone.tsx","src/components/dnn-image-cropper/CornerType.ts","src/utilities/mouseUtilities.ts","src/components/dnn-image-cropper/dnn-image-cropper.scss?tag=dnn-image-cropper&encapsulation=shadow","src/components/dnn-image-cropper/dnn-image-cropper.tsx","src/components/dnn-modal/dnn-modal.scss?tag=dnn-modal&encapsulation=shadow","src/components/dnn-modal/dnn-modal.tsx","src/components/dnn-permissions-grid/dnn-permissions-grid.scss?tag=dnn-permissions-grid&encapsulation=shadow","src/components/dnn-permissions-grid/dnn-permissions-grid.tsx","src/components/dnn-searchbox/dnn-searchbox.scss?tag=dnn-searchbox&encapsulation=shadow","src/components/dnn-searchbox/dnn-searchbox.tsx","src/components/dnn-sort-icon/dnn-sort-icon.scss?tag=dnn-sort-icon&encapsulation=shadow","src/components/dnn-sort-icon/dnn-sort-icon.tsx","src/components/dnn-tab/dnn-tab.scss?tag=dnn-tab&encapsulation=shadow","src/components/dnn-tab/dnn-tab.tsx","src/components/dnn-tabs/dnn-tabs.scss?tag=dnn-tabs&encapsulation=shadow","src/components/dnn-tabs/dnn-tabs.tsx","src/components/dnn-toggle/dnn-toggle.scss?tag=dnn-toggle&encapsulation=shadow","src/components/dnn-toggle/dnn-toggle.tsx","src/components/dnn-treeview-item/dnn-treeview-item.scss?tag=dnn-treeview-item&encapsulation=shadow","src/components/dnn-treeview-item/dnn-treeview-item.tsx","src/components/dnn-vertical-overflow-menu/dnn-vertical-overflow-menu.scss?tag=dnn-vertical-overflow-menu&encapsulation=shadow","src/components/dnn-vertical-overflow-menu/dnn-vertical-overflow-menu.tsx","src/components/dnn-vertical-splitview/dnn-vertical-splitview.scss?tag=dnn-vertical-splitview&encapsulation=shadow","src/components/dnn-vertical-splitview/dnn-vertical-splitview.tsx"],"names":["dnnButtonCss","DnnButton","hostRef","this","type","reversed","size","confirm","confirmYesText","confirmNoText","confirmMessage","disabled","modalVisible","prototype","componentDidLoad","modal","el","shadowRoot","querySelector","handleConfirm","hide","confirmed","emit","handleCancel","canceled","handleClick","show","getElementClasses","classes","push","join","render","_this","h","Host","class","style","pointer-events","onClick","showCloseButton","backdropDismiss","display","justifyContent","margin","dnnCheckboxCss","DnnCheckbox","checked","useIntermediate","changeState","checkedchange","concat","name","xmlns","height","viewBox","width","fill","d","enable-background","htmlFor","id","dnnChevronCss","DnnChevron","expandText","collapseText","expanded","handleExpandedChanged","newValue","changed","aria-label","dnnCollapsibleCss","DnnCollapsible","class_1","transitionDuration","handleHeightChanged","requestAnimationFrame","updateSize","container","maxHeight","scrollHeight","setTimeout","handledExpandedChanged","dnnCollapsibleHeightChanged","transition","ref","ColorInfo","_hue","_saturation","_lightness","Object","defineProperty","value","getRGB","red","setHSL","green","blue","r","getHex","g","b","parseInt","substr","brightness","chroma","Math","abs","saturation","quadrant","offset","bias","round","min","max","diff","s","l","hex","toString","length","dnnColorPickerCss","DnnColorPicker","color","colorBoxHeight","rgbDisplay","hslDisplay","hexDisplay","handleSaturationLightnessMouseDown","e","preventDefault","handleDragLightnessSaturation","window","addEventListener","handleSaturationLightnessMouseUp","rect","saturationLightnessBox","getBoundingClientRect","x","clientX","left","y","clientY","top","newColor","hue","currentColor","lightness","removeEventListener","handleHueMouseDown","handleDragHue","handleHueMouseUp","hueRange","handleComponentValueChange","channel","target","isNaN","handleHSLChange","component","h_1","handleSaturationLightnessKeyDown","shiftKey","key","handleHueKeyDown","colorChangedHandler","colorChanged","handeCurrentColorChanged","componentWillLoad","handleHexChange","setProperty","getDoublet","getContrast","contrastColor","valueString","toUpperCase","match","switchColorMode","element","backgroundColor","onMouseDown","bind","role","aria-valuemin","aria-valuemax","aria-valuetext","bottom","onKeyDown","boxShadow","aria-valuenow","step","onChange","__decorate","Debounce","dnnDropzoneCss","DnnDropzone","resx","dragAndDropFile","capture","or","takePicture","uploadFile","allowCameraMode","captureQuality","canTakeSnapshots","takingPicture","handleDragOver","event","stopPropagation","dataTransfer","dropEffect","dropzone","classList","add","handleDrop","dropEvent","files","hasInvalidExtensions","fileList","getFilesFromFileList","filesSelected","checkIfBrowserCanTakeSnapshots","then","result","allowedExtensions","undefined","extensionsWithDots","map","extensionsList","fileInput","accept","Promise","resolve","mediaDevices","navigator","enumerateDevices","devices","some","device","kind","index","file","handleUploadButton","hasInvalid","fileIndex","regex","fileExtension","exec","includes","takeSnapshot","getUserMedia","video","audio","stream","videoPreview","srcObject","play","videoSettings","getVideoTracks","getSettings","catch","error","alert","applySnapshot","canvas","document","createElement","context","getContext","drawImage","toBlob","blob","File","onDragOver","onDrop","onDragLeave","remove","_a","_b","_c","_d","cx","cy","_e","_f","CornerType","getMovementFromEvent","previousTouch","movementX","movementY","MouseEvent","TouchEvent","touch","touches","pageX","pageY","dnnImageCropperCss","DnnImageCropper","imageTooSmall","modalCloseText","quality","preventUndersized","handleCropMouseDown","className","handleImageCropFinished","handleCropDrag","handleNwMouseMove","handleNeMouseMove","handleSeMouseMove","handleSwMouseMove","_ev","emitImage","handleCornerDrag","nw","ne","se","sw","corner","isMouseStillInTarget","_g","getCornerLeftTop","newWidth","newHeight","orientation","wantedRatio","cropRect","crop","imageRect","image","_h","topOffset","offsetTop","leftOffset","offsetLeft","zoomRatio","naturalWidth","ev","newLeft","newTop","setView","newView","views","host","querySelectorAll","forEach","v","noPictureView","hasPictureView","view","initCrop","imageRatio","wantedHeight","wantedWidth","setImage","src","toDataURL","handleNewFile","split","reader","FileReader","onload","readerLoadEvent","img","Image","imageTooSmallModal","ctx","readAsDataURL","naturalHeight","dataUrl","generateCroppedImage","imageCropChanged","desiredWidth","desiredHeight","clearRect","inside","mouseX","mouseY","corners","cornerRect","onTouchStart","onFilesSelected","detail","close-text","replace","dnnModalCss","DnnModal","class_2","closeText","visible","handleDismiss","dismissed","handleBackdropClick","dnnPermissionsGridCss","DnnPermissionsGrid","Add","AllRoles","FilterByGroup","GlobalRoles","Role","RolePermissions","SelectRole","User","UserPermissions","foundUsers","selectedRoleGroupId","handleFoundUsersChanged","userCollapsible","dismissUserResults","disconnectedCallback","dropdownRect","roleDropDown","right","handleRoleGroupChanged","dropdown","selectedIndex","Number","options","addRole","roleId","roles","filter","RoleId","permissions","assign","rolePermissions","__spreadArray","default","locked","roleName","RoleName","permissionsChanged","addUser","pickedUser","userPermissions","displayName","userId","userQuery","getRoles","filteredRoles","rp","IsSystemRole","RoleGroupId","renderRoleCheckBox","rolePermission","permissionDefinition","item","permission","permissionId","opacity","allowAccess","use-intermediate","onCheckedchange","handleRoleChanged","slot","permissionName","renderUserCheckBox","userPermission","handleUserChanged","newRolePermission","p","fullControl","permissionCode","permissionKey","u","newUserPermission","removeRole","removeUser","up","handleQueryChanged","query","userSearchQueryChanged","handleSearchUserFieldKeyDown","firstButton","focus","handleSearchedUserKeyDown","button","nextButton","nextElementSibling","previousButton","previousElementSibling","handleUserPicked","searchedUser","getFilteredUsers","fu","selected","roleGroups","roleGroup","permissionDefinitions","placeholder","debounced","onQueryChanged","dnnSearchboxCss","DnnSearchbox","fireQueryChanged","debouncedHandleQueryChanged","queryChanged","onInput","dnnSortIconCss","DnnSortIcon","sortDirection","changeSort","sortChanged","active","dnnTabCss","DnnTab","class_3","dnnTabsCss","DnnTabs","tabTitles","selectedTabTitle","updateTitles","showFirstTab","getTabs","assignedElements","tabs","tab","tabTitle","showTab","dnnToggleCss","DnnToggle","checkedChanged","isChecked","checkChanged","dnnTreeviewItemCss","DnnTreeviewItem","hasChildren","watchExpanded","expander","collapsible","child","childElement","children","count","toggleCollapse","userExpanded","userCollapsed","dnnVerticalOverflowMenuCss","DnnVerticalOverflowMenu","showDropdownButton","showDropdownMenu","previousMenuWidth","componentDidRender","moveItemsToDropDownIfNecessery","resizeObserver","ResizeObserver","entries","_i","entries_1","entry","contentRect","moveItemsToMenuIfPossible","observe","menuItems","Array","from","menu","availableWidth","neededWidth","parseFloat","getComputedStyle","fontSize","getFullWidth","lastItem","hasChildNodes","firstItem","styles","marginLeft","marginRight","paddingLeft","paddingRight","toggleOverflowMenu","contentHeight_1","items","emHeight","gapsHeight","marginHeight","dismissMenu_1","buttonRect","dnnVerticalSplitviewCss","DnnVerticalSplitview","class_4","splitterWidth","splitWidthPercentage","leftWidth","rightWidth","setSplitWidthPercentage","panes","pane","splitter","fullWidth","getSplitWidthPercentage","widthChanged","handleMouseDown","handleDrag","handleDragFinished","newPercentage","handleKeyDown","minWidth"],"mappings":"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","sourcesContent":[":host {\n  --background-color: transparent;\n  --color: #333;\n  --border-size: 1px;\n  --border-color: var(--backround-color);\n  --border-radius: var(--dnn-controls-radius, 5px);\n  --padding: var(--dnn-controls-padding, 5px);\n  display: inline-block;\n  width: auto;\n}\n\n:host(.disabled){\n  pointer-events: none;\n}\n\n:host(.primary){\n  --background-color: var(--dnn-color-primary, blue);\n  --color: var(--dnn-color-primary-contrast, white);\n  --focus-color: var(--background-color);\n}\n\n:host(.primary.reversed){\n  --background-color: var(--dnn-color-primary-contrast, white);\n  --color: var(--dnn-color-primary, blue);\n  --border-color: var(--dnn-color-primary, blue);\n  --focus-color: var(--color);\n}\n\n:host(.secondary){\n  --background-color: var(--dnn-color-secondary, green);\n  --color: var(--dnn-color-secondary-contrast, white);\n  --focus-color: var(--background-color);\n}\n\n:host(.secondary.reversed){\n  --background-color: var(--dnn-color-secondary-contrast, white);\n  --color: var(--dnn-color-secondary, blue);\n  --border-color: var(--dnn-color-secondary, blue);\n  --focus-color: var(--color);\n}\n\n:host(.tertiary){\n  --background-color: var(--dnn-color-tertiary, yellow);\n  --color: var(--dnn-color-tertiary-contrast, black);\n  --focus-color: var(--background-color);\n}\n\n:host(.tertiary.reversed){\n  --background-color: var(--dnn-color-tertiary-contrast, white);\n  --color: var(--dnn-color-tertiary, blue);\n  --border-color: var(--dnn-color-tertiary, blue);\n  --focus-color: var(--color);\n}\n\n:host(.hydrated){\n  button{\n    border: var(--border-size) solid var(--border-color);\n    border-radius: var(--border-radius);\n    padding: var(--padding) calc(var(--padding) * 2);\n    background-color: transparent;\n    background-color: var(--background-color);\n    color: var(--color);\n    outline: none;\n    &:focus, &:hover{\n      box-shadow: 0 0 2px 2px var(--focus-color);\n    }\n  }\n}\n\n:host(:disabled, [disabled]){\n  button{\n    pointer-events: none;\n    opacity: 0.5;\n  }\n}\n\n:host(.small){\n  button{\n    padding: calc(var(--padding) / 2) var(--padding);\n    font-size: 0.7em;\n  }\n}\n\n:host(.large){\n  button{\n    padding: calc(var(--padding) * 1.5) calc(var(--padding) * 3);\n    font-size: 1.2em;\n  }\n}\n\nbutton{\n  height: 100%;\n  width: 100%;\n  cursor: pointer;\n}","import { Component, Element, Host, h, Prop, State, Event, EventEmitter } from '@stencil/core';\n\n/**\n * @slot Content of the button\n */\n@Component({\n  tag: 'dnn-button',\n  styleUrl: 'dnn-button.scss',\n  shadow: true\n})\nexport class DnnButton {\n\n  /**\n   * Optional button style,\n   * can be either primary, secondary or tertiary and defaults to primary if not specified\n   */\n  @Prop() type: 'primary' | 'secondary' | 'tertiary' = 'primary';\n\n  /**\n   * Optionally reverses the button style.\n   */\n  @Prop() reversed: boolean = false;\n\n  /**\n   * Optionally sets the button size, small normal or large, defaults to normal\n   */\n  @Prop() size?: 'small' | 'normal' | 'large' = 'normal';\n\n  /**\n   * Optionally add a confirmation dialog before firing the action.\n   */\n  @Prop() confirm?: boolean = false;\n\n  /**\n   * The text of the yes button for confirmation.\n   */\n  @Prop() confirmYesText?: string = \"Yes\";\n\n  /**\n   * The text of the no button for confirmation.\n   */\n  @Prop() confirmNoText?: string = \"No\";\n\n  /**\n   * The text of the confirmation message;\n   */\n  @Prop() confirmMessage?: string = \"Are you sure ?\";\n  \n  /**\n   * Disables the button\n   */\n  @Prop() disabled: boolean = false;\n\n  @State() modalVisible: boolean = false;\n\n  @Element() el!: HTMLDnnButtonElement;\n\n  private modal!: HTMLDnnModalElement;\n\n  /** \n   * Fires when confirm is true and the user confirms the action.\n  */\n  @Event({\n    bubbles: true,\n    cancelable: true,\n    composed: true\n  }) confirmed: EventEmitter;\n\n  /**\n   * Fires when confirm is true and the user cancels the action.\n   */\n  @Event({bubbles: true}) canceled: EventEmitter;\n\n  componentDidLoad(){\n    this.modal = this.el.shadowRoot.querySelector('dnn-modal');\n  }\n\n  private handleConfirm(){\n    this.modal.hide();\n    this.modalVisible = false;\n    this.confirmed.emit();\n  }\n\n  private handleCancel(){\n    this.modal.hide();\n    this.modalVisible = false;\n    this.canceled.emit();\n  }\n  \n  private handleClick(): void {\n    if (this.confirm && !this.modalVisible){\n      this.modal.show();\n      this.modalVisible = true;\n    }\n  }\n\n  private getElementClasses(): string | { [className: string]: boolean; } {\n    const classes: string[] = [];\n    classes.push(this.type);\n    if (this.reversed){\n      classes.push('reversed');\n    }\n    if (this.size !== 'normal'){\n      classes.push(this.size);\n    }\n    return classes.join(' ');\n  }\n\n  render() {\n    return (\n      <Host class={this.getElementClasses()} disabled={this.disabled} style={{'pointer-events': this.disabled ? 'none' : 'all'}}>\n        <button class=\"button\" onClick={() => this.handleClick()} disabled={this.disabled}>\n          <slot></slot>\n        </button>\n        {this.confirm &&\n            <dnn-modal showCloseButton={false} backdropDismiss={false}>\n              <p>{this.confirmMessage}</p>\n              <div style={\n                {\n                  display: 'flex',\n                  justifyContent: 'flex-end'\n                }\n              }>\n                <dnn-button type='primary' style={{margin: '5px'}} onClick={() => this.handleConfirm()}>{this.confirmYesText}</dnn-button>\n                <dnn-button type='secondary' style={{margin: '5px'}} onClick={() => this.handleCancel()}>{this.confirmNoText}</dnn-button>\n              </div>\n            </dnn-modal>\n          }\n      </Host>\n    );\n  }\n}\n",":host {\n    /**\n    * @prop --focus-color: The color to outline the checkbox when hovered or focused, default to the dnn primary color.\n    */\n  --focus-color: var(--dnn-color-primary, #3792ED);\n  display: inline-flex;\n  align-items: center;\n  gap: 0.25rem;\n  margin: 3px;\n}\nbutton{\n  background-color: transparent;\n  border: 0;\n  padding: 0;\n  margin: 0;\n  outline: none;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  .unchecked, .checked, .intermediate{\n    display: none;\n  }\n  &.checked .checked, &.unchecked .unchecked, &.intermediate .intermediate{\n    display: block;\n  }\n  svg.undefined{\n    opacity: 0.45;\n  }\n  &:focus{\n    box-shadow: 0 0 2px 2px var(--focus-color);\n  }\n}","import { Component, Element, Host, h, Prop, Event, EventEmitter } from '@stencil/core';\n\n/**\n * @slot - The label for the checkbox.\n * @slot checkedicon - Allows overriding the default checked icon.\n * @slot uncheckedicon - Allows overriding the unchecked icon.\n * @slot intermediateicon - If intermadiate state is used, allows overriding its icon.\n */\n@Component({\n  tag: 'dnn-checkbox',\n  styleUrl: 'dnn-checkbox.scss',\n  shadow: true,\n})\nexport class DnnCheckbox {\n  @Element() el: HTMLDnnCheckboxElement;\n\n  /** Defines if the checkbox is checked (true) or unchecked (false) or in an intermediate state (undefined) */\n  @Prop({mutable: true}) checked: \"checked\" | \"unchecked\" | \"intermediate\" = \"unchecked\";\n\n  /** Defines if clicking the checkbox will go through the intermediate state between checked and unchecked (tri-state) */\n  @Prop() useIntermediate: boolean = false;\n\n  /** The value for this checkbox (not to be confused with its checked state). */\n  @Prop() value: string;\n\n  /** Fires up when the checkbox checked property changes. */\n  @Event() checkedchange: EventEmitter<\"checked\" | \"unchecked\" | \"intermediate\">;\n\n  private changeState(): void {\n    if (!this.useIntermediate){\n      switch (this.checked) {\n        case \"checked\":\n          this.checked = \"unchecked\";\n          break;\n        case \"unchecked\":\n        case \"intermediate\":\n          this.checked = \"checked\";\n          break;\n        default:\n          break;\n      }\n      this.checkedchange.emit(this.checked);\n      return;\n    }\n    switch (this.checked) {\n      case \"checked\":\n        this.checked = \"intermediate\";\n        break;\n      case \"intermediate\":\n        this.checked = \"unchecked\";\n        break;\n      case \"unchecked\":\n        this.checked = \"checked\";\n        break;\n      default:\n        break;\n    }\n    this.checkedchange.emit(this.checked);\n  }\n\n  render() {\n    return (\n      <Host>\n        <button\n          class={`icon ${this.checked}`}\n          onClick={() => this.changeState()}\n        >\n          <div class=\"unchecked\">\n            <slot name=\"uncheckedicon\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\"/></svg>\n            </slot>\n          </div>\n          <div class=\"checked\">\n            <slot name=\"checkedicon\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"/></svg>\n            </slot>\n          </div>\n          <div class=\"intermediate\">\n            <slot name=\"intermediateicon\">\n              <svg class=\"undefined\" xmlns=\"http://www.w3.org/2000/svg\" enable-background=\"new 0 0 24 24\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><g><rect fill=\"none\" height=\"24\" width=\"24\"/></g><g><g><g><path d=\"M19,3H5C3.9,3,3,3.9,3,5v14c0,1.1,0.9,2,2,2h14c1.1,0,2-0.9,2-2V5C21,3.9,20.1,3,19,3z M17,13H7v-2h10V13z\"/></g></g></g></svg>\n            </slot>\n          </div>\n        </button>\n        <label htmlFor={this.el.id} onClick={() => this.changeState()}><slot></slot></label>\n      </Host>\n    );\n  }\n}\n",":host {\n  display: inline-block;\n}\nbutton{\n  border: none;\n  padding: 0px;\n  margin: 0px;\n  min-width: 15px;\n  min-height: 15px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: transparent;\n  outline: none;\n}\nsvg{\n  height:2em;\n  width:2em;\n  transition: all 300ms ease-in-out;\n}\n\n// FOCUS\nbutton:focus, button:hover{\n  svg{\n    color: var(--dnn-color-primary);\n  }\n}\n\n// EXPANDED\n:host([expanded]){\n  svg{\n    transform: rotate(90deg);\n  }\n}","import { Component, Host, h, Prop, Event } from '@stencil/core';\nimport { EventEmitter } from '@stencil/core';\nimport { Watch } from '@stencil/core';\n\n@Component({\n  tag: 'dnn-chevron',\n  styleUrl: 'dnn-chevron.scss',\n  shadow: true\n})\nexport class DnnChevron {\n\n  /** Expand text for screen readers */\n  @Prop() expandText?: string = \"expand\";\n\n  /** Collapse text for screen readers */\n  @Prop() collapseText?: string = \"collapse\";\n\n  /** Is the chevron expanded */\n  @Prop({mutable: true, reflect: true}) expanded?: boolean = false;\n\n  /** Fires up when the expanded status changes */\n  @Event() changed: EventEmitter;\n\n  @Watch('expanded')\n  handleExpandedChanged(newValue: boolean) {\n    this.changed.emit(newValue);\n  }\n\n  render() {\n    return (\n      <Host>\n        <button aria-label={this.expanded ? this.collapseText : this.expandText}\n          onClick={() => this.expanded = !this.expanded}\n        >\n          <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\"/></svg>\n        </button>\n      </Host>\n    );\n  }\n\n}\n",":host {\n  display: block;\n}\n#container{\n  max-height:0;\n  overflow: hidden;\n  transition: max-height 300ms ease-in-out;\n}","import { Component, Host, h, Prop, Element, Event, EventEmitter, Watch, Listen, Method } from '@stencil/core';\n\n@Component({\n  tag: \"dnn-collapsible\",\n  styleUrl: \"dnn-collapsible.scss\",\n  shadow: true\n})\nexport class DnnCollapsible {\n\n  @Element() el: HTMLDnnCollapsibleElement;\n\n  /** Defines if the panel is expanded or not. */\n  @Prop({reflect: true}) expanded: boolean = false;\n\n  /** Defines the transition time in ms, defaults to 150ms */\n  @Prop() transitionDuration?: number = 150;\n\n  /** Fires whenever the collapsible height has changed */\n  @Event({bubbles: true, composed: true}) dnnCollapsibleHeightChanged: EventEmitter<void>;\n\n  @Listen(\"dnnCollapsibleHeightChanged\")\n  handleHeightChanged(){\n    requestAnimationFrame(() => {\n      this.updateSize();\n    })\n  }\n\n  /**\n   * Updates the component height, use to update after a slot content changes.\n   */\n  @Method()\n  async updateSize() {\n    if (this.expanded){\n        requestAnimationFrame(() => {\n          this.container.style.maxHeight = `${this.container.scrollHeight}px`;\n        });\n        setTimeout(() => {\n          this.container.style.maxHeight = \"none\";\n        }, this.transitionDuration);\n    }\n  }\n  \n  @Watch(\"expanded\")\n  handledExpandedChanged(expanded: boolean){\n    if (expanded){\n      this.updateSize();\n    }\n    else{\n      requestAnimationFrame(() => {\n        this.container.style.maxHeight = `${this.container.scrollHeight}px`;\n        requestAnimationFrame(() => {\n          this.container.style.maxHeight = \"0px\";\n        });\n      });\n    }\n    setTimeout(() => {\n      requestAnimationFrame(() => {\n        this.dnnCollapsibleHeightChanged.emit();\n      });\n    }, this.transitionDuration);\n  }\n  \n  private container: HTMLDivElement;\n\n  componentDidLoad() {\n    this.container.style.transition = `max-height ${this.transitionDuration}ms ease-in-out`;\n  }\n\n  render() {\n    return (\n      <Host>\n        <div\n          id=\"container\"\n          class={this.expanded && \"expanded\"}\n          ref={el => this.container = el}\n          style={{transition: `max-height ${this.transitionDuration}ms ease-in-out`}}\n        >\n            <slot></slot>\n        </div>\n      </Host>\n    );\n  }\n\n}\n","/** Color utility class with hsl and rgb converters\r\n * based on math at https://en.wikipedia.org/wiki/HSL_and_HSV\r\n * @copyright Copyright (c) .NET Foundation. All rights reserved.\r\n * @license MIT \r\n */\r\n\r\nexport class ColorInfo{\r\n\r\n    private _hue: number = 0;\r\n    /** gets the color hue\r\n     * @returns a number between 0 and 359, could contain decimals\r\n     */\r\n    get hue() { return this._hue; }\r\n    set hue(value: number){\r\n        if (value < 0) { value = 0; }\r\n        if (value > 359) { value = 359; }\r\n        this._hue = value;\r\n    }\r\n\r\n    private _saturation: number = 0;\r\n    /** gets the color saturation\r\n     * @returns a number between 0 and 1, could contain decimals\r\n    */\r\n    get saturation() { return this._saturation; }\r\n    set saturation(value: number) {\r\n        if (value < 0) { value = 0; }\r\n        if (value > 1) { value = 1; }\r\n        this._saturation = value;\r\n    }\r\n\r\n    private _lightness: number = 0;\r\n    /** gets the color lightness\r\n     * @returns a number between 0 and 1, could contain decimals\r\n     */\r\n    get lightness() { return this._lightness; }\r\n    set lightness(value: number) {\r\n        if (value < 0) { value = 0; }\r\n        if (value > 1) { value = 1; }\r\n        this._lightness = value;\r\n    }\r\n\r\n    /** gets or sets the red component \r\n     * @returns an integer between 0 and 255\r\n    */\r\n    get red() {\r\n        return this.getRGB().red;\r\n    }\r\n    set red(value) {\r\n        this.setHSL(value, this.green, this.blue);\r\n    }\r\n\r\n    /** gets or sets the green component\r\n     * @returns an integer between 0 and 255\r\n     */\r\n    get green() {\r\n        return this.getRGB().green;\r\n    }\r\n    set green(value: number) {\r\n        this.setHSL(this.red, value, this.blue);\r\n    }\r\n\r\n    /** gets or sets the blue component\r\n     * @returns an integer between 0 and 255\r\n     */\r\n    get blue() {\r\n        return this.getRGB().blue;\r\n    }\r\n    set blue(value: number) {\r\n        this.setHSL(this.red, this.green, value);\r\n    }\r\n\r\n    /** gets or sets the hex color value, expresses as 6 hexadecimal characters.\r\n     * @returns hex representation of the color\r\n     */\r\n    get hex() {\r\n        var r = this.getHex(this.red);\r\n        var g = this.getHex(this.green);\r\n        var b = this.getHex(this.blue);\r\n        return r + g + b;\r\n    }\r\n    set hex(value: string){\r\n        this.red = parseInt(value.substr(0,2));\r\n        this.green = parseInt(value.substr(2,2));\r\n        this.blue = parseInt(value.substr(4,2));\r\n    }\r\n\r\n    /** gets white or black color that is a good oposite to the current color\r\n     * @returns - \"000000\" or \"FFFFFF\"\r\n     */\r\n    get contrastColor() {\r\n        const brightness = (this.red*299 + this.green*587 + this.blue*114) / 1000\r\n        if (brightness > 127){\r\n            return \"000000\";\r\n        }\r\n        return \"FFFFFF\";\r\n    }\r\n\r\n    private getRGB() {\r\n        const chroma = (1 - Math.abs((2 * this._lightness) - 1)) * this.saturation;\r\n        // find the quandrant of the hue\r\n        const quadrant = this._hue / 60;\r\n        // calculate the offset from the quandrant center\r\n        const offset = chroma * (1 - Math.abs(quadrant % 2 - 1));\r\n\r\n        // Apply the chroma to the primary component and the offset to the 2nd most important component\r\n        let r = 0, g = 0, b = 0;\r\n        if (0 <= quadrant && quadrant <= 1) {\r\n            r = chroma; g = offset; // red to yellow\r\n        } else if (1 <= quadrant && quadrant <= 2) {\r\n            g = chroma; r = offset; // yellow to green\r\n        } else if (2 <= quadrant && quadrant <= 3) {\r\n            g = chroma; b = offset; // green to cyan\r\n        } else if (3 <= quadrant && quadrant <= 4) {\r\n            b = chroma; g = offset; // cyan to blue\r\n        } else if (4 <= quadrant && quadrant <= 5) {\r\n            b = chroma; r = offset; // blue to magenta\r\n        } else if (5 <= quadrant && quadrant <= 6) {\r\n            r = chroma; b = offset; // magenta to red\r\n        }\r\n        // calculate the bias to add to all channels to match the lightness\r\n        const bias = this._lightness - (chroma / 2);\r\n\r\n        return {\r\n            red: Math.round((r + bias) * 255),\r\n            green: Math.round((g + bias) * 255),\r\n            blue: Math.round((b + bias) * 255)\r\n        }\r\n    }\r\n\r\n    private setHSL(red: number, green: number, blue: number) {\r\n        // GENERAL DATA\r\n        // all math is based on values from 0 to 1\r\n        const r = red/255, g = green/255, b = blue/255;\r\n        // we need to max, min and the difference between them to derive hsl\r\n        const min = Math.min(r, g, b);\r\n        const max = Math.max(r, g, b);\r\n        const diff = max - min;\r\n        let h = 0, s = 0, l = 0;\r\n\r\n        // HUE\r\n        if (diff === 0) { // neutral\r\n            h = 0;\r\n        } else if (max === r) { // red (magenta to yellow range)\r\n            h = 60 * ((g - b) / diff);\r\n        } else if (max === g) { // green (yellow to cyan range)\r\n            h = 60 * (2 + ((b - r) / diff));\r\n        } else if (max === b) { // blue (cyan to magenta range)\r\n            h = 60 * (4 + ((r - g) / diff));\r\n        }\r\n        if (h < 0) { h = h + 360} // ensures positive hues only\r\n        if (h > 359) { h = 359} // ensures we never return 360 for simplicity since it is the same as 0\r\n\r\n        // LIGHTNESS\r\n        l = (max + min) / 2;\r\n\r\n        // SATURATION\r\n        if (max === 0 || min === 1) { // pure black or white have no saturation\r\n            s = 0;\r\n        } else {\r\n            s = (max - l) / (Math.min(l, 1 - l));\r\n        }\r\n\r\n        this._hue = h;\r\n        this._saturation = s;\r\n        this._lightness = l;\r\n    }\r\n\r\n    private getHex(value: number){\r\n        var hex = value.toString(16);\r\n        if (hex.length < 2){\r\n            hex = \"0\" + hex;\r\n        }\r\n        return hex;\r\n    }\r\n} ",".dnn-color-picker{\r\n    padding: 15px;\r\n    max-width: 400px;\r\n    .dnn-color-sliders{\r\n        display:flex;\r\n        flex-direction: column;\r\n        min-width: 200px;\r\n        .dnn-color-s-b{\r\n            border: 1px solid #ccc;\r\n            padding-bottom: var(--color-box-height, 50%);\r\n            position: relative;\r\n            background-color: red;\r\n            &:before{\r\n                content: '';\r\n                    position: absolute;\r\n                    top:0;\r\n                    left:0;\r\n                    width: 100%;\r\n                    height:100%;\r\n                    z-index:1;\r\n                    background: linear-gradient(to right, white, red);\r\n                    mix-blend-mode: saturation;\r\n            }\r\n            &:after{\r\n                content: '';\r\n                position: absolute;\r\n                top:0;\r\n                left:0;\r\n                width: 100%;\r\n                height:100%;\r\n                z-index:2;\r\n                background: linear-gradient(to bottom, white, black);\r\n                mix-blend-mode: luminosity;\r\n            }\r\n            button{\r\n                position: absolute;\r\n                bottom: calc(50% - 4px);\r\n                left: calc(50% - 4px);\r\n                width: 8px;\r\n                height: 8px;\r\n                z-index: 3;\r\n                display: block;\r\n                background: none;\r\n                border: none;\r\n                margin-left: -4px;\r\n                margin-bottom: -4px;\r\n                padding: 7px;\r\n                background-color: #fff;\r\n                border-radius: 50%;\r\n                &:before{\r\n                    content:'';\r\n                    position: absolute;\r\n                    top: -1px;\r\n                    left: -1px;\r\n                    border-radius: 50%;\r\n                }\r\n                &:after{\r\n                    content:'';\r\n                    position: absolute;\r\n                    top: 0px;\r\n                    left: 0px;\r\n                    border-radius: 50%;\r\n                    width: 10px;\r\n                    height: 10px;\r\n                    border: 2px solid #ccc;\r\n                }\r\n            } \r\n        }\r\n        .dnn-color-bar {\r\n            display: flex;\r\n            align-items: center;\r\n            margin-top: 15px;\r\n            .dnn-color-result {\r\n                flex-direction: column;\r\n                width: 50px;\r\n                height: 50px;\r\n                border-radius: 50%;\r\n                background: red;\r\n            }\r\n            .dnn-color-hue{\r\n                flex: auto;\r\n                margin-left: 10px;\r\n                height: 16px;\r\n                border: 1px solid #ccc;\r\n                position: relative;\r\n                background: linear-gradient(\r\n                    to right, \r\n                    #f00 0, \r\n                    #ff0 17%,\r\n                    #0f0 33%,\r\n                    #0ff 50%,\r\n                    #00f 67%,\r\n                    #f0f 84%,\r\n                    #f00 100%\r\n                );\r\n                button{\r\n                    width: 10px;\r\n                    height: 20px;\r\n                    position: absolute;\r\n                    top: -2px;\r\n                    left: calc(50% - 4px);\r\n                    border: 0;\r\n                    padding: 0;\r\n                    background-color: transparent;\r\n                    padding-left: -8px;\r\n                    &:before{\r\n                        content:'';\r\n                        position: absolute;\r\n                        top: -2px;\r\n                        left: 0px;\r\n                        border-radius: 3px;\r\n                        width: 100%;\r\n                        height: 100%;\r\n                        border: 1px solid #ccc;\r\n                        background-color: #fff;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    .dnn-color-fields{\r\n        display:flex;\r\n        flex-direction: column;\r\n        justify-content: space-between;\r\n        .dnn-color-mode-switch {\r\n            display: flex;\r\n            align-items: flex-end;\r\n            padding: .5em;\r\n            button {\r\n                background-color: transparent;\r\n                border: none;\r\n                svg {\r\n                    width: 3em;\r\n                    height: 3em;\r\n                    pointer-events: none;\r\n                    outline: none;\r\n                }\r\n            }\r\n        }\r\n        .dnn-rgb-color-fields {\r\n            display: flex;\r\n            justify-content: space-evenly;\r\n            .dnn-rgb-color-field {\r\n                display: flex;\r\n                flex-direction: column;\r\n                flex: auto;\r\n                text-align: center;\r\n                padding: .5em;\r\n                label {\r\n                    padding-bottom: .25em;\r\n                }\r\n                input{\r\n                    border-radius: var(--dnn-button-radius, 3px);\r\n                    border: 1px solid #ccc;\r\n                    padding: 0.5em;\r\n                    padding-left: 1.3em;\r\n                    text-align: center;\r\n                    &.red{\r\n                        border-color: red;\r\n                    }\r\n                    &.green{\r\n                        border-color: green;                \r\n                    }\r\n                    &.blue{\r\n                        border-color: blue;\r\n                    }            \r\n                }\r\n            }\r\n        }\r\n        .dnn-hsl-color-fields {\r\n            display: flex;\r\n            justify-content: space-evenly;\r\n            .dnn-hsl-color-field {\r\n                display: flex;\r\n                flex-direction: column;\r\n                flex: auto;\r\n                text-align: center;\r\n                padding: .5em;\r\n                label {\r\n                    padding-bottom: .25em;\r\n                }\r\n                input{\r\n                    border-radius: var(--dnn-button-radius, 3px);\r\n                    border: 1px solid #ccc;\r\n                    padding: 0.5em;\r\n                    padding-left: 1.3em;\r\n                    text-align: center;\r\n                }\r\n            }\r\n        }\r\n        .dnn-hex-color-fields {\r\n            display: flex;\r\n            justify-content: space-evenly;\r\n            .dnn-hex-color-field {\r\n                display: flex;\r\n                flex-direction: column;\r\n                flex: auto;\r\n                text-align: center;\r\n                padding: .5em;\r\n                label {\r\n                    padding-bottom: .25em;\r\n                }\r\n                .hex-input{\r\n                    position: relative;\r\n                    border-radius: var(--dnn-button-radius, 3px);\r\n                    border: 1px solid #ccc;\r\n                    padding: 0.323em;\r\n                    text-align: center;\r\n                    input{\r\n                        border:0;\r\n                        padding:0;\r\n                        margin:0;\r\n                        width:100%;\r\n                        height:100%;\r\n                        text-align:center;\r\n                    }\r\n                    button{\r\n                        position: absolute;\r\n                        height: 100%;\r\n                        top: 0;\r\n                        right: 1em;\r\n                        background-color: transparent;\r\n                        border:0;\r\n                        padding:0;\r\n                        margin:0;\r\n                        svg{\r\n                            min-width: 1em;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n} ","/** Reusable DNN UI component to pick a color\r\n * @copyright Copyright (c) .NET Foundation. All rights reserved.\r\n * @license MIT \r\n */\r\n\r\nimport { Component, h, State, Element, Prop, EventEmitter, Event, Watch } from \"@stencil/core\";\r\nimport { ColorInfo } from '../../utilities/colorInfo';\r\nimport { Debounce } from \"../../utilities/debounce\";\r\n\r\n/** Color Picker for Dnn */\r\n@Component({\r\n    tag: 'dnn-color-picker',\r\n    styleUrl: 'dnn-color-picker.scss',\r\n    shadow: true\r\n})\r\nexport class DnnColorPicker {\r\n\r\n    @Element() el: HTMLDnnColorPickerElement;\r\n\r\n    /** Sets the initial color, must be a valid 8 character hexadecimal string without the # sign. */\r\n    @Prop() color: string = \"FFFFFF\";\r\n\r\n    /** Sets the width-height ratio of the color picker saturation-lightness box.\r\n     * @example 100% renders a perfect square\r\n     */\r\n    @Prop() colorBoxHeight: string = \"50%\";\r\n    \r\n    @State() currentColor: ColorInfo;\r\n    @State() rgbDisplay: string = \"flex\";\r\n    @State() hslDisplay: string = \"none\";\r\n    @State() hexDisplay: string = \"none\";\r\n\r\n    /** Fires up when the color is changed and emits a ColorInfo object\r\n     * @see ../../utilities/colorInfo.ts\r\n    */\r\n    @Event() colorChanged: EventEmitter<ColorInfo>;\r\n\r\n    @Debounce(100)\r\n    private colorChangedHandler(color: ColorInfo) {\r\n        this.colorChanged.emit(color);\r\n    }\r\n\r\n    @Watch(\"currentColor\")\r\n    handeCurrentColorChanged(newValue: ColorInfo){\r\n        this.colorChangedHandler(newValue);\r\n    }\r\n    \r\n    private saturationLightnessBox?: HTMLDivElement;\r\n    private hueRange?: HTMLDivElement;\r\n\r\n\r\n    componentWillLoad() {\r\n        this.handleHexChange(this.color);\r\n    }\r\n\r\n    componentDidLoad() {\r\n        (this.el as unknown as HTMLElement).style.setProperty(\"--color-box-height\", this.colorBoxHeight.toString());\r\n    }\r\n    \r\n    private getHex() {\r\n       return this.getDoublet(this.currentColor.red) + this.getDoublet(this.currentColor.green) + this.getDoublet(this.currentColor.blue);\r\n    }\r\n\r\n    private getContrast() {\r\n        return this.currentColor.contrastColor;\r\n    }\r\n\r\n    private getDoublet(value: number){\r\n        const valueString = value.toString(16).toUpperCase();\r\n        if (valueString.length === 1){\r\n            return '0' + valueString;\r\n        }\r\n        return valueString;\r\n    }\r\n\r\n    private handleSaturationLightnessMouseDown = (e) => {\r\n        e.preventDefault();\r\n        this.handleDragLightnessSaturation(e);\r\n        window.addEventListener('mousemove', this.handleDragLightnessSaturation);\r\n        window.addEventListener('mouseup', this.handleSaturationLightnessMouseUp);\r\n    }\r\n\r\n    private handleDragLightnessSaturation = (e) => {\r\n        const rect = this.saturationLightnessBox.getBoundingClientRect();        \r\n\r\n        let x = e.clientX - rect.left;        \r\n        if (x < 0) { x = 0}\r\n        if (x > rect.width) { x = rect.width}\r\n        x = x/rect.width;\r\n\r\n        let y = e.clientY - rect.top;\r\n        if (y < 0) { y = 0}\r\n        if (y > rect.height) { y = rect.height}\r\n        y = 1 - (y/rect.height);\r\n\r\n        const newColor = new ColorInfo();\r\n        newColor.hue = this.currentColor.hue;\r\n        newColor.saturation = x;\r\n        newColor.lightness = y;\r\n        this.currentColor = newColor;\r\n    }\r\n\r\n    private handleSaturationLightnessMouseUp = () => {\r\n        window.removeEventListener('mousemove', this.handleDragLightnessSaturation);\r\n        window.removeEventListener('mouseup', this.handleSaturationLightnessMouseUp);\r\n    }\r\n\r\n    private handleHueMouseDown = (e) => {\r\n        e.preventDefault();\r\n        this.handleDragHue(e);\r\n        window.addEventListener('mousemove', this.handleDragHue);\r\n        window.addEventListener('mouseup', this.handleHueMouseUp);        \r\n    }\r\n\r\n    private handleHueMouseUp = () => {\r\n        window.removeEventListener('mousemove', this.handleDragHue);\r\n        window.removeEventListener('mouseup', this.handleHueMouseUp); \r\n    }\r\n\r\n    private handleDragHue = (e) => {\r\n        const rect = this.hueRange.getBoundingClientRect();        \r\n\r\n        let x = e.clientX - rect.left;\r\n        if (x < 0) { x = 0}\r\n        if (x > rect.width) { x = rect.width}\r\n        x = x/rect.width*360;        \r\n\r\n        const newColor = new ColorInfo();\r\n        newColor.hue = x;\r\n        newColor.saturation = this.currentColor.saturation;\r\n        newColor.lightness = this.currentColor.lightness;\r\n        this.currentColor = newColor;\r\n    }\r\n\r\n    private handleComponentValueChange = (e, channel) => {\r\n        let value = parseInt(e.target.value);\r\n        if (isNaN(value)) { return }\r\n        const newColor = new ColorInfo();\r\n        if (value < 0) { value = 0; }\r\n        if (value > 255) { value = 255; }\r\n        let r = this.currentColor.red;\r\n        let g = this.currentColor.green;\r\n        let b = this.currentColor.blue;\r\n        switch (channel) {\r\n            case 'red':\r\n                r = value;\r\n                break;\r\n            case 'green':\r\n                g = value;\r\n                break;\r\n            case 'blue':\r\n                b = value;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        newColor.green = g;\r\n        newColor.red = r;\r\n        newColor.blue = b;\r\n        this.currentColor = newColor;\r\n    }\r\n\r\n    private handleHSLChange = (e, component) => {        \r\n        let value = parseInt(e.target.value);\r\n        if (isNaN(value)) {return}\r\n        const newColor = new ColorInfo();\r\n        if (value != null) {            \r\n            let h = this.currentColor.hue;\r\n            let s = this.currentColor.saturation;\r\n            let l = this.currentColor.lightness;\r\n            switch (component) {\r\n                case \"hue\":\r\n                    if (value < 0) { value = 0}\r\n                    if (value > 359) { value = 0}\r\n                    h = value;\r\n                    break;\r\n                case \"saturation\":\r\n                    if (value < 0) { value = 0}\r\n                    if (value > 100) { value = 100}\r\n                    s = value / 100;\r\n                    break;\r\n                case \"lightness\":\r\n                    if (value < 0) { value = 0}\r\n                    if (value > 100) { value = 100}\r\n                    l = value / 100;\r\n                    break;            \r\n                default:\r\n                    break;                \r\n            }\r\n            newColor.hue = h;\r\n            newColor.saturation = s;\r\n            newColor.lightness = l;\r\n            this.currentColor = newColor;\r\n        }\r\n    }\r\n\r\n    private handleHexChange(value: string){\r\n        const newColor = new ColorInfo();\r\n        if (value.match(/^(?:[\\da-f]{3}|[\\da-f]{6})$/i).length > 0) {\r\n            if (value.length === 3){\r\n                let expanded = value[0] + value[0] + value[1] + value[1] + value[2] + value [2];\r\n                value = expanded;\r\n            }\r\n            newColor.red = parseInt(value.substr(0,2), 16);\r\n            newColor.green = parseInt(value.substr(2,2), 16);\r\n            newColor.blue = parseInt(value.substr(4,2), 16);\r\n        }\r\n        else{\r\n            newColor.red = this.currentColor.red;\r\n            newColor.green = this.currentColor.green;\r\n            newColor.blue = this.currentColor.blue;\r\n        }\r\n        this.currentColor = newColor;\r\n    }\r\n\r\n    private switchColorMode(e) {\r\n        switch(e.target.id) {\r\n            case \"rgb-switch\":\r\n                this.rgbDisplay = \"none\";\r\n                this.hslDisplay = \"none\";\r\n                this.hexDisplay = \"flex\";\r\n                break;\r\n            case \"hex-switch\":\r\n                this.rgbDisplay = \"none\";\r\n                this.hslDisplay = \"flex\";\r\n                this.hexDisplay = \"none\";\r\n                break;\r\n            case \"hsl-switch\":\r\n                this.rgbDisplay = \"flex\";\r\n                this.hslDisplay = \"none\";\r\n                this.hexDisplay = \"none\";\r\n                break;\r\n            default:\r\n                this.rgbDisplay = \"flex\";\r\n                this.hslDisplay = \"none\";\r\n                this.hexDisplay = \"none\";\r\n        }\r\n    }\r\n\r\n    private handleSaturationLightnessKeyDown = (e) => {        \r\n        let newColor = new ColorInfo();\r\n        newColor.hue = this.currentColor.hue;\r\n        newColor.saturation = this.currentColor.saturation;\r\n        newColor.lightness = this.currentColor.lightness;\r\n\r\n        let value = 0.01;\r\n        if (e.shiftKey) { value = 0.1 ;}\r\n\r\n        switch (e.key) {\r\n            case \"ArrowUp\":\r\n                newColor.lightness += value;\r\n                break;\r\n            case \"ArrowDown\":\r\n                newColor.lightness -= value;\r\n                break;\r\n            case \"ArrowLeft\":\r\n                newColor.saturation -= value;\r\n                break;\r\n            case \"ArrowRight\":\r\n                newColor.saturation += value;\r\n            default:\r\n                break;                \r\n        }\r\n        this.currentColor = newColor;\r\n    }\r\n\r\n    private handleHueKeyDown = (e) => {\r\n        let newColor = new ColorInfo();\r\n        newColor.hue = this.currentColor.hue;\r\n        newColor.saturation = this.currentColor.saturation;\r\n        newColor.lightness = this.currentColor.lightness;\r\n\r\n        let value = 1;\r\n        if (e.shiftKey) { value = 10}\r\n\r\n        switch (e.key) {\r\n            case \"ArrowLeft\":\r\n                newColor.hue -= value;\r\n                break;\r\n            case \"ArrowRight\":\r\n                newColor.hue += value;\r\n            default:\r\n                break;\r\n        }\r\n        this.currentColor = newColor;\r\n    }\r\n\r\n    render() {\r\n        const hue = this.currentColor.hue;\r\n        const saturation = this.currentColor.saturation;\r\n        const lightness = this.currentColor.lightness;\r\n        const red = this.currentColor.red;\r\n        const green = this.currentColor.green;\r\n        const blue = this.currentColor.blue;\r\n\r\n        return (\r\n            <div class=\"dnn-color-picker\">\r\n                <div class=\"dnn-color-sliders\">\r\n                    <div class=\"dnn-color-s-b\" ref={(element) => this.saturationLightnessBox = element as HTMLDivElement}\r\n                        style={{backgroundColor: `hsl(${hue},100%,50%)`}}\r\n                        onMouseDown={this.handleSaturationLightnessMouseDown.bind(this)}\r\n                    >\r\n                        <button class=\"dnn-s-b-picker\"\r\n                            aria-label=\"Press up or down to adjust lightness, left or right to adjust saturation, hold shift to move by 10%\"\r\n                            role=\"slider\"\r\n                            aria-valuemin=\"0\"\r\n                            aria-valuemax=\"100\"\r\n                            aria-valuetext={`Saturation: ${Math.round(this.currentColor.saturation*100)}%, Lightness: ${Math.round(this.currentColor.lightness*100)}%`}\r\n                            style={{\r\n                                left: Math.round(saturation * 100)  + \"%\",\r\n                                bottom: Math.round(lightness * 100)  + \"%\"\r\n                            }}\r\n                            onKeyDown={(e) => this.handleSaturationLightnessKeyDown(e)}\r\n                        />\r\n                    </div>\r\n                    <div class=\"dnn-color-bar\">\r\n                        <div class=\"dnn-color-result\" style={{\r\n                            backgroundColor: '#' + this.getHex(),\r\n                            boxShadow: \"0 0 2px 1px \" + \"#\" + this.getContrast()\r\n                        }} \r\n                        />\r\n                        <div class=\"dnn-color-hue\"\r\n                            ref={(element) => this.hueRange = element as HTMLDivElement}\r\n                            onMouseDown={this.handleHueMouseDown.bind(this)}\r\n                        >\r\n                            <button class=\"dnn-hue-picker\"\r\n                                aria-label=\"Press left or right to adjust hue, hold shift to move by 10 degrees\"\r\n                                role=\"slider\"\r\n                                aria-valuemin=\"0\"\r\n                                aria-valuemax=\"359\"\r\n                                aria-valuenow={Math.round(hue)}\r\n                                style={{left: (hue/359*100).toString() + \"%\"}}\r\n                                onKeyDown={(e) => this.handleHueKeyDown(e)}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"dnn-color-fields\">\r\n                    <div class=\"dnn-rgb-color-fields\" style={{display: this.rgbDisplay}}>\r\n                        <div class=\"dnn-rgb-color-field\">\r\n                            <label>R</label>\r\n                            <input type=\"number\" min=\"0\" max=\"255\" step=\"1\" class=\"red\" value={red} aria-label=\"red value\"\r\n                                onChange={(e) => this.handleComponentValueChange(e, 'red')}\r\n                            />\r\n                        </div>\r\n                        <div class=\"dnn-rgb-color-field\">\r\n                            <label>G</label>\r\n                            <input type=\"number\" min=\"0\" max=\"255\" class=\"green\" value={green} aria-label=\"green value\"\r\n                                onChange={(e) => this.handleComponentValueChange(e, 'green')}\r\n                            />\r\n                        </div>\r\n                        <div class=\"dnn-rgb-color-field\">\r\n                            <label>B</label>\r\n                            <input type=\"number\" min=\"0\" max=\"255\" class=\"blue\" value={blue} aria-label=\"blue value\"\r\n                                onChange={(e) => this.handleComponentValueChange(e, 'blue')}\r\n                            />\r\n                        </div>\r\n                        <div class=\"dnn-color-mode-switch\">\r\n                            <button\r\n                                id=\"rgb-switch\"\r\n                                onClick={this.switchColorMode.bind(this)}\r\n                                aria-label=\"switch to hexadecimal value entry\"\r\n                            >\r\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z\"/></svg>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"dnn-hsl-color-fields\" style={{display: this.hslDisplay}}>\r\n                        <div class=\"dnn-hsl-color-field\">\r\n                            <label>H</label>\r\n                            <input type=\"number\" min=\"0\" max=\"359\" step={1} value={Math.round(hue)} aria-label=\"Hue\"\r\n                                onChange={(e) => this.handleHSLChange(e, 'hue')}\r\n                            />\r\n                        </div>\r\n                        <div class=\"dnn-hsl-color-field\">\r\n                            <label>S</label>\r\n                            <input type=\"number\" min=\"0\" max=\"100\" step={1} value={Math.round(saturation*100)} aria-label=\"Saturation\"\r\n                                onChange={(e) => this.handleHSLChange(e, 'saturation')}\r\n                            />\r\n                        </div>\r\n                        <div class=\"dnn-hsl-color-field\">\r\n                            <label>L</label>\r\n                            <input type=\"number\" min=\"0\" max=\"100\" step={1} value={Math.round(lightness*100)} aria-label=\"Lightness\"\r\n                                onChange={(e) => this.handleHSLChange(e, 'lightness')}\r\n                            />\r\n                        </div>\r\n                        <div class=\"dnn-color-mode-switch\">\r\n                            <button\r\n                                id=\"hsl-switch\"\r\n                                onClick={this.switchColorMode.bind(this)}\r\n                                aria-label=\"Switch to red, green, blue entry mode\"\r\n                            >\r\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z\"/></svg>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"dnn-hex-color-fields\" style={{display: this.hexDisplay}}>\r\n                        <div class=\"dnn-hex-color-field\">\r\n                            <label>HEX</label>\r\n                            <div class=\"hex-input\">\r\n                                <input type=\"text\" aria-label=\"Hexadecimal value\"\r\n                                    value={this.getHex()}\r\n                                    onChange={e => this.handleHexChange((e.target as HTMLInputElement).value)}\r\n                                />\r\n                                <button\r\n                                    class=\"copy\"\r\n                                    aria-label=\"copy value\"\r\n                                >\r\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z\"/></svg>\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"dnn-color-mode-switch\">\r\n                            <button\r\n                                id=\"hex-switch\"\r\n                                onClick={this.switchColorMode.bind(this)}\r\n                                aria-label=\"Switch to hue saturation lightness values\"\r\n                            >\r\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z\"/></svg>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}","\n:host {\n  /** \n  * @prop --border-color: The color of the border.\n  * @prop --border-radius: The radius of the controls borders.\n  * @prop --drop-background-color: The color of the background when a file is dropping.\n  */\n  --border-color: var(--dnn-color-tertiary-contrast, lightgray);\n  --border-radius: var(--dnn-controls-radius, 5px);\n  --drop-background-color: var(--dnn-color-tertiary, lightblue);\n\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  text-align: center;\n  border: 2px dashed var(--border-color);\n  border-radius: var(--border-radius);\n  padding: 1rem;\n  transition: all 300ms ease-in-out;\n}\n\n:host(.dropping){\n  background-color: var(--drop-background-color);\n}\np{\n  margin: 0;\n  padding: 0;\n}\nbutton{\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border: 0px;\n  margin: 0;\n  padding: 0;\n  background-color: transparent;\n  &:hover{\n    cursor: pointer;\n  }\n  svg{\n    margin-right: 0.5rem;\n  }\n}\nlabel.upload-file{\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n  input{\n    display: none;\n  }\n}\n.video-preview{\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  button{\n    margin: 1rem;\n  }\n}\n","import { Component, Host, h, Prop, State, Event, EventEmitter } from '@stencil/core';\n\n@Component({\n  tag: 'dnn-dropzone',\n  styleUrl: 'dnn-dropzone.scss',\n  shadow: true,\n})\nexport class DnnDropzone {\n  /** Localization strings */\n  @Prop() resx:{\n    dragAndDropFile: string;\n    capture: string;\n    or: string;\n    takePicture: string;\n    uploadFile: string;\n  } = {\n    dragAndDropFile: \"Drag and drop a file\",\n    capture: \"Capture\",\n    or: \"or\",\n    takePicture: \"Take a picture\",\n    uploadFile: \"Upload a file\",\n  }\n\n  /** A list of allowed file extensions.\n   * If not specified, any file is allowed.\n   * Ex: [\"jpg\", \"jped\", \"gif\", \"png\"]\n   */\n  @Prop() allowedExtensions: string[];\n\n  /**\n   * If true, will allow the user to take a snapshot\n   * using the device camera. (only works over https).\n   */\n  @Prop() allowCameraMode: boolean = false;\n\n  /**\n   * Specifies the jpeg quality for when the device\n   * camera is used to generate a picture.\n   * Needs to be a number between 0 and 1 and defaults to 0.8\n   */\n  @Prop() captureQuality: number = 0.8;\n\n  /** Fires when file were selected. */\n  @Event() filesSelected: EventEmitter<File[]>;\n  \n  @State() canTakeSnapshots: boolean = false;\n\n  @State() takingPicture: boolean = false;\n  \n  private dropzone: HTMLElement;\n  private fileInput: HTMLInputElement;\n  private videoPreview: HTMLVideoElement;\n  private videoSettings!: MediaTrackSettings;\n\n\n  componentDidLoad() {\n    if (this.allowCameraMode){\n      this.checkIfBrowserCanTakeSnapshots()\n      .then(result => this.canTakeSnapshots = result);\n    }\n    if (this.allowedExtensions != undefined && this.allowedExtensions.length > 0){\n      var extensionsWithDots = this.allowedExtensions.map(e => `.${e}`);\n      var extensionsList = extensionsWithDots.join(\",\");\n      this.fileInput.accept = extensionsList;\n    }\n  }\n\n  private checkIfBrowserCanTakeSnapshots(): Promise<boolean> {\n    return new Promise((resolve) => {\n      const mediaDevices = navigator.mediaDevices;\n      if (mediaDevices == undefined || mediaDevices.enumerateDevices == undefined) {\n        resolve(false);\n      }\n      mediaDevices.enumerateDevices()\n        .then(devices => {\n          var result = devices.some(device => device.kind == \"videoinput\");\n          resolve(result);\n        });\n    });\n  }\n\n  private getFilesFromFileList(files: FileList) : File[] {\n    var fileList: File[] = [];\n    for (let index = 0; index < files.length; index++) {\n      const file = files[index];\n      fileList.push(file);\n    }\n\n    return fileList;\n  }\n\n  private handleUploadButton(element: HTMLInputElement): void {\n    let files = this.getFilesFromFileList(element.files);\n\n    this.filesSelected.emit(files);\n  }\n\n  private handleDragOver = (event: DragEvent) => \n  {\n    event.stopPropagation();\n    event.preventDefault();\n    event.dataTransfer.dropEffect = \"copy\";\n    this.dropzone.classList.add(\"dropping\");\n  };\n\n  private hasInvalidExtensions(files: FileList): boolean{\n    var hasInvalid = false;\n    for (let fileIndex = 0; fileIndex < files.length; fileIndex++) {\n      const file = files[fileIndex];\n      var regex = /(?:\\.([^.]+))?$/;\n      const fileExtension = regex.exec(file.name)[1];\n      if (fileExtension == undefined){\n        hasInvalid = true;\n      }\n\n      if (this.allowedExtensions != undefined && !this.allowedExtensions.includes(fileExtension)){\n        hasInvalid = true;\n      }\n\n      return hasInvalid;\n    }\n  }\n\n  private handleDrop = (dropEvent: DragEvent) => {\n    dropEvent.stopPropagation();\n    dropEvent.preventDefault();\n    const files = dropEvent.dataTransfer.files;\n\n    if (this.hasInvalidExtensions(files)){\n      return;\n    }\n    var fileList = this.getFilesFromFileList(files);\n    this.filesSelected.emit(fileList);\n  };\n\n  private takeSnapshot(): void {\n    this.takingPicture = true;\n    navigator.mediaDevices.getUserMedia({video: true, audio: false})\n    .then(stream => {\n      stream\n      this.videoPreview.srcObject = stream;\n      this.videoPreview.play()\n      .then(() => {\n        this.videoSettings = stream.getVideoTracks()[0].getSettings();\n      });\n    })\n    .catch(error => alert(error));\n  }\n\n  private applySnapshot(): void {\n    var canvas = document.createElement(\"canvas\");\n    const context = canvas.getContext(\"2d\");\n    canvas.width = this.videoSettings.width;\n    canvas.height = this.videoSettings.height;\n    context.drawImage(this.videoPreview, 0, 0);\n    canvas.toBlob(blob => {\n      var file = new File([blob], \"image.jpeg\", {type:\"image/jpeg\"});\n      this.takingPicture = false;\n      \n      var fileList = [file];\n      this.filesSelected.emit(fileList)\n    }, \"image/jpeg\", this.captureQuality);\n  }\n  \n  render() {\n    return (\n      <Host\n        ref={e => this.dropzone = e}\n        class=\"dropzone\"\n        onDragOver={this.handleDragOver}\n        onDrop={this.handleDrop}\n        onDragLeave={() => this.dropzone.classList.remove(\"dropping\")}\n      >\n        {!this.takingPicture &&\n          [\n            <p>{this.resx?.dragAndDropFile}</p>\n          ,\n            <p>- {this.resx?.or} -</p>\n          ,\n            <label class=\"upload-file\">\n              <input\n                type=\"file\"\n                ref={el => this.fileInput = el}\n                onChange={e => this.handleUploadButton(e.target as HTMLInputElement)}\n              >\n              </input>\n              <span>\n                <svg xmlns=\"http://www.w3.org/2000/svg\" enable-background=\"new 0 0 24 24\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><g><rect fill=\"none\" height=\"24\" width=\"24\"/></g><g><path d=\"M5,20h14v-2H5V20z M5,10h4v6h6v-6h4l-7-7L5,10z\"/></g></svg>\n              </span>\n              &nbsp;\n              {this.resx?.uploadFile}\n            </label>\n            ,\n            this.canTakeSnapshots &&\n              [\n                <p>- {this.resx?.or} -</p>\n                ,\n                <button\n                  onClick={() => this.takeSnapshot()}\n                >\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><circle cx=\"12\" cy=\"12\" r=\"3.2\"/><path d=\"M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z\"/></svg>\n                  {this.resx?.takePicture}\n                </button>\n              ]\n          ]\n        }\n        {this.takingPicture &&\n          <div class=\"video-preview\">\n            <video ref={e => this.videoPreview = e} />\n            <button\n              onClick={() => this.applySnapshot()}\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><circle cx=\"12\" cy=\"12\" r=\"3.2\"/><path d=\"M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z\"/></svg>&nbsp;\n              {this.resx?.capture}\n            </button>\n          </div>\n        }\n      </Host>\n    );\n  }\n\n}\n","export enum CornerType {\r\n    \"nw\",\r\n    \"ne\",\r\n    \"se\",\r\n    \"sw\",\r\n};","export function getMovementFromEvent(\r\n    event: MouseEvent | TouchEvent,\r\n    previousTouch: Touch\r\n) {\r\n    let movementX = 0;\r\n    let movementY = 0;\r\n    if (event instanceof MouseEvent) {\r\n      movementX = event.movementX;\r\n      movementY = event.movementY;\r\n    }\r\n    if (typeof TouchEvent !== \"undefined\"){\r\n      if (event instanceof TouchEvent) {\r\n        let touch = event.touches[0];\r\n        if (previousTouch != undefined) {\r\n          movementX = touch.pageX - this.previousTouch.pageX;\r\n          movementY = touch.pageY - this.previousTouch.pageY;\r\n        }\r\n        previousTouch = touch;\r\n      }\r\n    }\r\n    return { movementX, movementY };\r\n  }",":host {\n  display: block;\n}\ncanvas {\n  display: none;\n}\n.view{\n  visibility: hidden;\n  opacity: 0;\n  height: 0;\n  overflow: hidden;\n  transition: all 300ms ease-in-out;\n  &.visible{\n    visibility: visible;\n    opacity: 1;\n    height: initial;\n    overflow: visible;\n  }\n  .cropper{\n    position: relative;\n    width: 100%;\n    img{\n      width: 100%;\n      display: block;\n      margin: 0 auto;\n    }\n    .backdrop{\n      backdrop-filter: saturate(0.5);\n      backdrop-filter: brightness(0.5);\n      position: absolute;\n      left: 0;\n      top: 0;\n      width: 100%;\n      height: 100%;\n    }\n    .crop{\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      outline: 2px dashed white;\n      box-shadow: black 0 0 0px 2px;\n      backdrop-filter: saturate(2);\n      backdrop-filter: brightness(2);\n      cursor: move;\n      >div{\n        width: 20px;\n        height: 20px;\n        background-color: white;\n        border: 2px solid rgba(0,0,0,0.5);\n        position: absolute;\n        &.nw, &.ne{\n          top: -17px;\n        }\n        &.ne, &.se{\n          right: -17px;\n        }\n        &.se, &.sw{\n          bottom: -17px;\n        }\n        &.sw, &.nw{\n          left: -17px;\n        }\n        &.nw, &.se{\n          cursor: nwse-resize;\n        }\n        &.ne, &.sw{\n          cursor: nesw-resize;\n        }\n      }\n    }\n  }\n}\ndnn-modal{\n  --max-width: 512px;\n}","import { Component, Host, h, State, Prop, Event, EventEmitter } from '@stencil/core';\nimport { CornerType } from './CornerType';\nimport { getMovementFromEvent } from \"../../utilities/mouseUtilities\";\n\n/**\n * Allows cropping an image in-browser with the option to enforce a specific final size.\n * All computation happens in the browser and the final image is emmited\n * in an event that has a data-url of the image.\n */\n@Component({\n  tag: 'dnn-image-cropper',\n  styleUrl: 'dnn-image-cropper.scss',\n  shadow: true,\n})\nexport class DnnImageCropper {\n  /** Sets the desired final image width. */\n  @Prop() width: number = 600;\n\n  /** Sets the desired final image height. */\n  @Prop() height: number = 600;\n\n  /** Can be used to customize controls text.\n   * Some values support tokens, see default values for examples.\n  */\n  @Prop() resx: {\n    capture: string;\n    dragAndDropFile: string;\n    or: string;\n    takePicture: string;\n    uploadFile: string;\n    imageTooSmall: string;\n    modalCloseText: string;\n  } = {\n    capture: \"Capture\",\n    dragAndDropFile: \"Drag and drop an image\",\n    or: \"or\",\n    takePicture: \"Take a picture\",\n    uploadFile: \"Upload an image\",\n    imageTooSmall: \"The image you are attempting to upload does not meet the minimum size requirement of {width} pixels by {height} pixels. Please upload a larger image.\",\n    modalCloseText: \"Close\",\n  }\n\n  /** Sets the output quality of the corpped image (number between 0 and 1). */\n  @Prop() quality: number = 0.8;\n\n  /** When set to true, prevents cropping an image smaller than the required size, which would blow pixel and make the final picture look blurry. */\n  @Prop() preventUndersized: boolean = false;\n\n  /** When the image crop changes, emits the dataurl for the new cropped image. */\n  @Event() imageCropChanged: EventEmitter<string>;\n\n  @State() view: IComponentInterfaces[\"View\"];\n  \n  private host: HTMLElement;\n  private hasPictureView: HTMLDivElement;\n  private noPictureView: HTMLDivElement;\n  private canvas: HTMLCanvasElement;\n  private image: HTMLImageElement;\n  private crop: HTMLDivElement;\n  private previousTouch: Touch;\n  private imageTooSmallModal!: HTMLDnnModalElement;\n\n  componentDidLoad() {\n    requestAnimationFrame(() => {\n      this.setView(\"noPictureView\");\n    })\n  }\n\n  private setView(newView: IComponentInterfaces[\"View\"]){\n    const views = this.host.shadowRoot.querySelectorAll(\".view\");\n    views.forEach(v =>\n      v.classList.remove(\"visible\"));\n    switch (newView) {\n      case \"noPictureView\":\n        this.noPictureView.classList.add(\"visible\");\n        break;\n      case \"hasPictureView\":\n        this.hasPictureView.classList.add(\"visible\");\n        break;\n      default:\n        break;\n    }\n    this.view = newView;\n  }\n\n  private initCrop(){\n    var wantedRatio = this.width / this.height;\n    var imageRect = this.image.getBoundingClientRect();\n    var imageRatio = imageRect.width / imageRect.height;\n    \n    if (wantedRatio > imageRatio){\n        var wantedHeight = imageRect.width / wantedRatio;\n        var diff = imageRect.height - wantedHeight;\n        this.crop.style.top = Math.round(diff/2).toString() + \"px\";\n        this.crop.style.height = Math.round(wantedHeight).toString() + \"px\";\n    }\n    else{\n      var wantedWidth = imageRect.height * wantedRatio;\n      var diff = imageRect.width - wantedWidth;\n        this.crop.style.left = Math.round(diff/2).toString() + \"px\";\n        this.crop.style.width = Math.round(wantedWidth).toString() + \"px\";\n    }\n  }\n\n  private setImage(){\n    this.image.addEventListener('load', () => {\n      this.initCrop();\n      this.emitImage();\n    })\n    this.image.src = this.canvas.toDataURL();\n  }\n\n  private handleNewFile(file: File): void {\n    if (file.type.split('/')[0] != \"image\"){\n      return;\n    }\n    \n    var reader = new FileReader();\n    reader.onload = readerLoadEvent => {\n      var img = new Image();\n      img.onload = () => {\n        this.canvas.width = img.width;\n        this.canvas.height = img.height;\n        if (this.preventUndersized && (img.width < this.width || img.height< this.height)){\n          this.imageTooSmallModal.show();\n          return;\n        }\n        var ctx = this.canvas.getContext(\"2d\");\n        ctx.drawImage(img,0,0);\n        this.setView(\"hasPictureView\");\n        this.setImage();\n      }\n      img.src = readerLoadEvent.target.result.toString();\n    }\n    reader.readAsDataURL(file);\n  }\n\n  private handleCropMouseDown = (event: MouseEvent | TouchEvent) => {\n    event.stopPropagation();\n    event.preventDefault();\n    const element = event.target as HTMLElement;\n    const className = element.classList[0];\n\n    document.addEventListener(\"mouseup\", this.handleImageCropFinished, false);\n    document.addEventListener(\"touchend\", this.handleImageCropFinished, false);\n    switch (className) {\n      case \"crop\":\n        document.addEventListener(\"mousemove\", this.handleCropDrag, false);\n        document.addEventListener(\"touchmove\", this.handleCropDrag, false)\n        document.addEventListener(\"mouseup\", () => document.removeEventListener(\"mousemove\", this.handleCropDrag));\n        document.addEventListener(\"touchend\", () => document.removeEventListener(\"touchmove\", this.handleCropDrag));\n        break;\n      case \"nw\":\n        document.addEventListener(\"mousemove\", this.handleNwMouseMove, false);\n        document.addEventListener(\"touchmove\", this.handleNwMouseMove, false)\n        document.addEventListener(\"mouseup\", () => document.removeEventListener(\"mousemove\", this.handleNwMouseMove));\n        document.addEventListener(\"touchend\", () => document.removeEventListener(\"touchmove\", this.handleNwMouseMove));\n        break;\n      case \"ne\":\n        document.addEventListener(\"mousemove\", this.handleNeMouseMove, false);\n        document.addEventListener(\"touchmove\", this.handleNeMouseMove, false)\n        document.addEventListener(\"mouseup\", () => document.removeEventListener(\"mousemove\", this.handleNeMouseMove));\n        document.addEventListener(\"touchend\", () => document.removeEventListener(\"touchmove\", this.handleNeMouseMove));\n        break\n      case \"se\":\n        document.addEventListener(\"mousemove\", this.handleSeMouseMove, false);\n        document.addEventListener(\"touchmove\", this.handleSeMouseMove, false)\n        document.addEventListener(\"mouseup\", () => document.removeEventListener(\"mousemove\", this.handleSeMouseMove));\n        document.addEventListener(\"touchend\", () => document.removeEventListener(\"touchmove\", this.handleSeMouseMove));\n        break;\n      case \"sw\":\n        document.addEventListener(\"mousemove\", this.handleSwMouseMove, false);\n        document.addEventListener(\"touchmove\", this.handleSwMouseMove, false)\n        document.addEventListener(\"mouseup\", () => document.removeEventListener(\"mousemove\", this.handleSwMouseMove));\n        document.addEventListener(\"touchend\", () => document.removeEventListener(\"touchmove\", this.handleSwMouseMove));\n        break;\n      default:\n        break;\n    }\n  };\n\n  private handleImageCropFinished = (_ev: MouseEvent) => {\n    this.emitImage();\n    document.removeEventListener(\"mouseup\", this.handleImageCropFinished);\n    this.previousTouch = undefined;\n  }\n\n  private emitImage() {\n    var x = this.crop.offsetLeft / this.image.width * this.image.naturalWidth;\n    var y = this.crop.offsetTop / this.image.height * this.image.naturalHeight;\n\n    var cropRect = this.crop.getBoundingClientRect();\n    var width = cropRect.width / this.image.width * this.image.naturalWidth;\n    var height = cropRect.height / this.image.height * this.image.naturalHeight;\n\n    if (x < 0)\n      x = 0;\n    if (x > this.image.naturalWidth)\n      x = this.image.naturalWidth;\n    if (y < 0)\n      y = 0;\n    if (y > this.image.naturalWidth)\n      y = this.image.naturalWidth;\n    if (width > this.image.naturalWidth)\n      width = this.image.naturalWidth;\n    if (height > this.image.naturalHeight)\n      height = this.image.naturalHeight;\n\n    var dataUrl = this.generateCroppedImage(x, y, width, height, this.width, this.height);\n    this.imageCropChanged.emit(dataUrl);\n  }\n\n  private generateCroppedImage(x: number, y: number, width: number, height: number, desiredWidth: number, desiredHeight: number) {\n    this.canvas.width = desiredWidth;\n    this.canvas.height = desiredHeight;\n    const context = this.canvas.getContext(\"2d\");\n    context.clearRect(0, 0, desiredWidth, desiredHeight);\n    context.drawImage(this.image, x, y, width, height, 0, 0, desiredWidth, desiredHeight);\n\n    return this.canvas.toDataURL(\"image/jpeg\", this.quality);\n  }\n\n  private handleNwMouseMove = (event: MouseEvent | TouchEvent) => {\n    this.handleCornerDrag(event, CornerType.nw);\n  }\n\n  private handleNeMouseMove = (event: MouseEvent | TouchEvent) => {\n    this.handleCornerDrag(event, CornerType.ne);\n  }\n\n  private handleSeMouseMove = (event: MouseEvent | TouchEvent) => {\n    this.handleCornerDrag(event, CornerType.se);\n  }\n\n  private handleSwMouseMove = (event: MouseEvent | TouchEvent) => {\n    this.handleCornerDrag(event, CornerType.sw);\n  }\n\n  private handleCornerDrag = (event: MouseEvent | TouchEvent, corner: CornerType) => {\n    if (!this.isMouseStillInTarget(event)){\n      return;\n    }\n    \n    let {left, top} = this.getCornerLeftTop(corner);\n    let newWidth = 0;\n    let newHeight = 0;\n    let orientation: \"horizontal\" | \"vertical\" = \"horizontal\";\n    const wantedRatio = this.width / this.height;\n    const cropRect = this.crop.getBoundingClientRect();\n    const imageRect = this.image.getBoundingClientRect();\n    let { movementX, movementY } = getMovementFromEvent(event, this.previousTouch);\n    if (Math.abs(movementX) < Math.abs(movementY)){\n      orientation = \"vertical\";\n    }\n\n    if (orientation == \"horizontal\"){\n      switch (corner) {\n        case CornerType.nw:\n        case CornerType.sw:\n          newWidth = cropRect.width - movementX;\n          newHeight = newWidth / wantedRatio;\n          break;\n        case CornerType.ne:\n        case CornerType.se:\n          newWidth = cropRect.width + movementX;\n          newHeight = newWidth / wantedRatio;\n          break;\n        default:\n          break;\n      }\n    } else{\n      switch (corner) {\n        case CornerType.nw:\n        case CornerType.ne:\n          newHeight = cropRect.height - movementY;\n          newWidth = newHeight * wantedRatio;\n          break;\n        case CornerType.se:\n        case CornerType.sw:\n          newHeight = cropRect.height + movementY;\n          newWidth = newHeight * wantedRatio;\n          break;\n        default:\n          break;\n      }\n    }\n\n    switch (corner) {\n      case CornerType.ne:\n      case CornerType.nw:\n        const topOffset = cropRect.height - newHeight;\n        top = this.crop.offsetTop + topOffset;\n      default:\n        break;\n    }\n\n    switch (corner) {\n      case CornerType.nw:\n      case CornerType.sw:\n        const leftOffset = cropRect.width - newWidth;\n        left = this.crop.offsetLeft + leftOffset;\n        if (left < 0) left = 0;\n        if (left > imageRect.width) left = imageRect.width;\n        if (top < 0) top = 0;\n        if (top > imageRect.height) top = imageRect.height;\n        if (left + newWidth > imageRect.width) newWidth = imageRect.width - left;\n        if (top + newHeight > imageRect.height) newHeight = imageRect.height - top;\n        break;\n      case CornerType.ne:\n      case CornerType.se:\n        if (top < 0) top = 0;\n        if (top > imageRect.height) top = imageRect.height;\n        if (left + newWidth > imageRect.width) newWidth = imageRect.width - left;\n        if (top + newHeight > imageRect.height) newHeight = imageRect.height - top;\n        break;\n      default:\n        break;\n    }\n\n    if (newWidth / newHeight != wantedRatio){\n      return;\n    }\n\n    if (this.preventUndersized){\n      const zoomRatio = this.image.width / this.image.naturalWidth;\n      if (newWidth / zoomRatio < this.width || newHeight / zoomRatio < this.height){\n        return;\n      }\n    }\n\n    switch (corner) {\n      case CornerType.ne:\n        this.crop.style.top = `${top}px`;\n        this.crop.style.width = `${newWidth}px`;\n        this.crop.style.height = `${newHeight}px`;\n        break;\n      case CornerType.nw:\n        this.crop.style.left = `${left}px`;\n        this.crop.style.top = `${top}px`;\n        this.crop.style.width = `${newWidth}px`;\n        this.crop.style.height = `${newHeight}px`;\n        break;\n      case CornerType.se:\n        this.crop.style.width = `${newWidth}px`;\n        this.crop.style.height = `${newHeight}px`;\n        break;\n      case CornerType.sw:\n        this.crop.style.left = `${left}px`;\n        this.crop.style.width = `${newWidth}px`;\n        this.crop.style.height = `${newHeight}px`;\n        break;\n      default:\n        break;\n    }\n  }\n\n  private getCornerLeftTop(corner: CornerType): { left: number; top: number; } {\n    let left = 0;\n    let top = 0;\n    switch (corner) {\n      case CornerType.se:\n        left = this.crop.offsetLeft;\n        top = this.crop.offsetTop;\n        break;\n      case CornerType.sw:\n        top = this.crop.offsetTop;\n        break;\n      default:\n        break;\n    }\n    return {top, left};\n  }\n\n  private handleCropDrag = (ev: MouseEvent | TouchEvent) => {\n    if (!this.isMouseStillInTarget(ev)){\n      return;\n    }\n    let {movementX, movementY} = getMovementFromEvent(ev, this.previousTouch);\n    let newLeft = this.crop.offsetLeft + movementX;\n    let newTop = this.crop.offsetTop + movementY;\n    var imageRect = this.image.getBoundingClientRect();\n    var cropRect = this.crop.getBoundingClientRect();\n    if (newLeft < 0){\n      newLeft = 0;\n    }\n    if (newTop < 0){\n      newTop = 0;\n    }\n    if (newLeft + cropRect.width > imageRect.width){\n      newLeft = this.crop.offsetLeft;\n    }\n    if (newTop + cropRect.height > imageRect.height){\n      newTop = this.crop.offsetTop;\n    }\n    this.crop.style.left = newLeft + \"px\";\n    this.crop.style.top = newTop + \"px\";\n  };\n\n  private isMouseStillInTarget(event: MouseEvent | TouchEvent) {\n    var inside = false;\n    let mouseX: number;\n    let mouseY: number;\n    const imageRect = this.image.getBoundingClientRect();\n    \n    if (event instanceof MouseEvent){\n      mouseX = event.clientX;\n      mouseY = event.clientY;\n    }\n\n    if (typeof TouchEvent !== \"undefined\"){\n      if (event instanceof TouchEvent){\n        var touch = event.touches[0];\n        mouseX = touch.clientX;\n        mouseY = touch.clientY;\n      }\n    }\n    \n    if (\n      mouseX >= imageRect.x &&\n      mouseY >= imageRect.y &&\n      mouseX <= imageRect.left + imageRect.width &&\n      mouseY <= imageRect.top + imageRect.height)\n    {\n      inside = true;\n    }\n\n    var corners = this.crop.querySelectorAll(\"div\");\n    corners.forEach(corner =>{\n      var cornerRect = corner.getBoundingClientRect();\n      if (\n        mouseX >= cornerRect.x &&\n        mouseY >= cornerRect.y &&\n        mouseX <= cornerRect.left + cornerRect.width &&\n        mouseY <= cornerRect.top + cornerRect.height)\n        {\n          inside = true;\n        }\n    })\n\n    return inside;\n  }\n\n  render() {\n    return (\n      <Host ref={el => this.host = el}>\n        <canvas ref={el => this.canvas = el} />\n        <div\n          class=\"view\"\n          ref={el => this.hasPictureView = el}\n        >\n          <div class=\"cropper\">\n            <img ref={el => this.image = el} />\n            <div class=\"backdrop\" />\n            <div\n              class=\"crop\"\n              ref={e => this.crop = e}\n              onMouseDown={this.handleCropMouseDown}\n              onTouchStart={this.handleCropMouseDown}\n            >\n              <div class=\"nw\" />\n              <div class=\"ne\" />\n              <div class=\"se\" />\n              <div class=\"sw\" />\n            </div>\n          </div>\n        </div>\n        <div\n          class=\"view\"\n          ref={el => this.noPictureView = el}>\n            <dnn-dropzone\n              allowCameraMode\n              onFilesSelected={e => this.handleNewFile(e.detail[0])}\n              resx={\n                {\n                  capture: this.resx.capture,\n                  dragAndDropFile: this.resx.dragAndDropFile,\n                  or: this.resx.or,\n                  takePicture: this.resx.takePicture,\n                  uploadFile: this.resx.uploadFile,\n                }\n              }\n            />\n        </div>\n        <dnn-modal ref={el => this.imageTooSmallModal = el} close-text={this.resx.modalCloseText}>\n          <p>{this.resx.imageTooSmall.replace(\"{width}\", this.width.toString()).replace(\"{height}\", this.height.toString())}</p>\n        </dnn-modal>\n      </Host>\n    );\n  }\n}\n\ninterface IComponentInterfaces\n{\n  View: \"noPictureView\" | \"takingPictureView\" | \"hasPictureView\" | \"hasCroppedPictureView\";\n}",":host {\n  /**\n   * @prop --max-width: The maximum width of the module.\n  */\n  display: block;\n  .overlay{\n    background-color: rgba(0,0,0,0.5);\n    position: fixed;\n    top:0;\n    left:0;\n    width: 100%;\n    height: 100%;\n    z-index: 1;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    backdrop-filter: blur(2px);\n    transition: all 300ms ease-in-out;\n    visibility: hidden;\n    opacity: 0;\n    .modal{\n      max-width: var(--max-width, 1200px);\n      background-color: white;\n      padding: 30px;\n      transform: scale(2);\n      transition: all 300ms ease-in-out;\n      z-index: 2;\n      position: relative;\n      margin: 10%;\n      max-height: 80%;\n      border-radius: var(--dnn-controls-radius, 5px);\n      box-shadow: 10px 10px 20px 0 rgba(0,0,0,0.5);\n      display: block;\n      .close{\n        position: absolute;\n        background-color:white;\n        border: 2px solid white;\n        border-radius: 50%;\n        padding: 0;\n        margin: 0;\n        top: -12px;\n        right: -12px;\n        outline: none;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        &:focus, &:hover{\n          box-shadow: 0 0 2px 2px var(--dnn-color-primary, blue);\n        }\n        svg{\n          width: 24px;\n          height: 24px;\n          color: grey;\n        }\n      }\n    }\n    &.visible{\n      visibility: visible;\n      opacity: 1;\n      .modal{\n        transform: scale(1);\n        box-shadow: 4px 4px 10px 0px rgba(0,0,0,0.5);\n        display: block;\n      }\n    }\n  }\n}","import { Component, Element, Host, h, Prop, Event, EventEmitter, Method } from '@stencil/core';\n\n@Component({\n  tag: 'dnn-modal',\n  styleUrl: 'dnn-modal.scss',\n  shadow: true\n})\nexport class DnnModal {\n  \n  @Element() el!: HTMLDnnModalElement;\n  \n  /**\n   * Pass false to remove the backdrop click auto-dismiss feature.\n   */\n  @Prop() backdropDismiss: boolean = true;\n\n  /**\n   * Optionally pass the aria-label text for the close button.\n   * Defaults to \"Close modal\" if not provided.\n   */\n  @Prop() closeText?: string = \"Close modal\";\n\n  /**\n   * Optionally you can pass false to not show the close button.\n   * If you decide to do so, you should either not also prevent dismissal by clicking the backdrop\n   * or provide your own dismissal logic in the modal content.\n   */\n  @Prop() showCloseButton?: boolean = true;\n\n  /**\n   * Reflects the visible state of the modal.\n   */\n  @Prop({mutable: true, reflect: true}) visible: boolean = false;\n\n  /**\n   * Shows the modal\n   */\n  @Method()\n  async show() {\n    this.visible = true;\n  }\n\n  /**\n   * Hides the modal\n   */\n  @Method()\n  async hide() {\n    this.visible = false;\n  }\n\n  /**\n   * Fires when the modal is dismissed.\n   */\n  @Event() dismissed!: EventEmitter;\n\n  private handleDismiss(){\n    this.visible = false;\n    this.dismissed.emit();\n  }\n\n  private handleBackdropClick(e: MouseEvent): void {\n    const element = (e.target as HTMLElement);\n    if (element.id === \"backdrop\" && this.backdropDismiss){\n      this.handleDismiss();\n    }\n  }\n\n  render() {\n    return (\n      <Host>\n        <div id=\"backdrop\"\n          class={this.visible ? 'overlay visible' : 'overlay'}\n          onClick={e => this.handleBackdropClick(e)}\n        >\n          <div class=\"modal\">\n            {this.showCloseButton &&\n              <button\n                class=\"close\"\n                aria-label={this.closeText}\n                onClick={() => this.handleDismiss()}\n              >\n                <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z\"/></svg>\n              </button>\n            }\n            <slot></slot>\n          </div>\n        </div>\n      </Host>\n    );\n  }\n}\n",":host {\n  display: block;\n}\n\n.add-role-row{\n  display: flex;\n  gap: 1em;\n  align-items: center;\n  flex-wrap: wrap;\n  label{\n    margin-right:0.5em;\n  }\n}\n.search-user{\n  display: flex;\n  gap: 1em;\n  margin-top: 1em;\n  .search-control{\n    position: relative;\n    dnn-collapsible{\n      position: absolute;\n      left: 0;\n      top: calc(100% - 2px);\n      width: 100%;\n      box-shadow: 0px 4px 4px;\n      .dropdown{\n        background-color: white;\n        border: 1px solid lightgray;\n        display: flex;\n        flex-direction: column;\n        button{\n          background-color: transparent;\n          border: none;\n          border-bottom: 1px solid lightgray;\n          padding: 0.25em;\n          margin: 0;\n          text-align: left;\n        }\n      }\n    }\n  }\n}\ntable{\n  border: 1px solid lightgray;\n  border-collapse: collapse;\n  margin-top: 1em;\n  thead{\n    text-align: center;\n    tr{\n      border-bottom: 1px solid lightgray;\n    }\n    th{\n      background-color: lightgray;\n      padding: 0.25em 0.5em;\n      &:first-child{\n        border-right: 1px solid lightgray;\n      }\n    }\n  }\n  tbody{\n    tr{\n      border-bottom: 1px dotted lightgray;\n      th{\n        text-align: left;\n        border-right: 1px solid lightgray;\n        padding: 0 0.5em;\n      }\n      td{\n        text-align: center;\n        dnn-checkbox{\n          span{\n            display: none;\n          }\n        }\n        button{\n          background-color: transparent;\n          border: 0;\n          padding: 0;\n          margin: 0;\n          margin-right: 1em;\n        }\n      }\n    }\n  }\n}","import { Component, Host, h, Prop, State, Event, EventEmitter, Watch } from '@stencil/core';\nimport { ILocalization } from './localization-interface';\nimport { IPermissionDefinition, IPermissions, IRolePermission, IUserPermission } from './permissions-interface';\nimport { IRoleGroup } from './role-group-interface';\nimport { IRole } from './role-interface';\nimport { ISearchedUser } from './searched-user-interface';\n\n@Component({\n  tag: 'dnn-permissions-grid',\n  styleUrl: 'dnn-permissions-grid.scss',\n  shadow: true,\n})\nexport class DnnPermissionsGrid {\n\n  /** The list of permissions. */\n  @Prop({mutable: true}) permissions!: IPermissions;\n\n  /** The list of role groups. */\n  @Prop() roleGroups!: IRoleGroup[];\n\n  /** The list of possible roles. */\n  @Prop() roles!: IRole[];\n\n  /** Optionally allows localizing the component strings. */\n  @Prop() resx: ILocalization = {\n    Add: \"Add\",\n    AllRoles: \"All Roles\",\n    FilterByGroup: \"Filter By Group\",\n    GlobalRoles: \"Global Roles\",\n    Role: \"Role\",\n    RolePermissions: \"Role Permissions\",\n    SelectRole: \"Select Role\",\n    User: \"User\",\n    UserPermissions: \"User Permissions\",\n  }\n\n  /** The list of users to show under the search users field when a search is performed. */\n  @Prop() foundUsers: ISearchedUser[] = [];\n\n  /** Fires when searching for users to add to the permissions. Emits the search query. */\n  @Event() userSearchQueryChanged: EventEmitter<string>;\n  \n  /** Fires when any permissions have changed, can be used for instance to have linked permissions. */\n  @Event() permissionsChanged: EventEmitter<IPermissions>;\n\n  @State() selectedRoleGroupId = -1;\n  @State() userQuery: string;\n  @State() pickedUser: ISearchedUser;\n  \n  \n  @Watch(\"foundUsers\")\n  handleFoundUsersChanged(newValue: ISearchedUser[]){\n    if (newValue?.length > 0){\n      setTimeout(() => {\n        this.userCollapsible.expanded = true;\n      }, 100);\n    }\n  }\n  \n  componentWillLoad() {\n    document.addEventListener(\"click\", this.dismissUserResults.bind(this));\n  }\n  \n  disconnectedCallback() {\n    document.removeEventListener(\"click\", this.disconnectedCallback.bind(this));\n  }\n  \n  private roleDropDown: HTMLSelectElement;\n  private userCollapsible: HTMLDnnCollapsibleElement;\n\n  private dismissUserResults(e: MouseEvent){\n    const dropdownRect = this.roleDropDown.getBoundingClientRect();\n    if (\n      e.pageX > dropdownRect.right ||\n      e.pageX < dropdownRect.left ||\n      e.pageY > dropdownRect.bottom ||\n      e.pageY < dropdownRect.top){\n        this.userCollapsible.expanded = false;\n      }\n  } \n\n  private handleRoleGroupChanged(dropdown: HTMLSelectElement): void {\n    const index = dropdown.selectedIndex;\n    const value = Number.parseInt(dropdown.options[index].value);\n    this.selectedRoleGroupId = value;\n  }\n\n  private addRole(): void {\n    const roleId = Number.parseInt(this.roleDropDown.options[this.roleDropDown.selectedIndex].value);\n    const role = this.roles.filter(r => r.RoleId == roleId)[0];\n    this.permissions = {\n      ...this.permissions,\n      rolePermissions: [\n        ...this.permissions.rolePermissions,\n        {\n          default: false,\n          locked: false,\n          permissions: [],\n          roleId: role.RoleId,\n          roleName: role.RoleName,\n        }\n      ]\n    }\n    this.permissionsChanged.emit(this.permissions);\n  }\n\n  private addUser(): void {\n    if (this.pickedUser != undefined){\n      this.permissions = {\n        ...this.permissions,\n        userPermissions: [\n          ...this.permissions.userPermissions,\n          {\n            displayName: this.pickedUser.displayName,\n            permissions: [],\n            userId: this.pickedUser.userId,\n          },\n        ],\n      };\n      this.pickedUser = undefined;\n      this.userQuery = \"\";\n      this.permissionsChanged.emit(this.permissions);\n    }\n  }\n\n  private getRoles(){\n    const filteredRoles = this.roles.filter(role => \n      !this.permissions.rolePermissions.some(rp => rp.roleId == role.RoleId))\n    if (this.selectedRoleGroupId == -2){\n      // All Roles\n      return filteredRoles;\n    }\n\n    if (this.selectedRoleGroupId == -1){\n      // Global Roles\n      return filteredRoles.filter(role => role.IsSystemRole);\n    }\n    \n    return filteredRoles.filter(role => role.RoleGroupId == this.selectedRoleGroupId);\n  }\n\n  private renderRoleCheckBox(rolePermission: IRolePermission, permissionDefinition: IPermissionDefinition) {\n    const item = rolePermission.permissions.filter(permission => permission.permissionId == permissionDefinition.permissionId)[0];\n    if (rolePermission.locked){\n      return(\n        <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><g fill=\"none\"><path d=\"M0 0h24v24H0V0z\"/><path d=\"M0 0h24v24H0V0z\" opacity=\".87\"/></g><path d=\"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z\"/></svg>\n      )\n    }\n\n    const checked = item == undefined ? \"intermediate\" : item.allowAccess ? \"checked\" : \"unchecked\";\n    return(\n      <dnn-checkbox\n        use-intermediate\n        checked={checked}\n        onCheckedchange={e => this.handleRoleChanged(e.detail, rolePermission, permissionDefinition)}\n      >\n        <div slot=\"intermediateicon\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\"/></svg>\n        </div>\n        <div slot=\"uncheckedicon\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8z\"/></svg>\n        </div>\n        <span>{permissionDefinition.permissionName}</span>\n      </dnn-checkbox>\n    )\n  }\n\n  private renderUserCheckBox(userPermission: IUserPermission, permissionDefinition: IPermissionDefinition) {\n    const item = userPermission.permissions.filter(permission => permission.permissionId == permissionDefinition.permissionId)[0];\n\n    const checked = item == undefined ? \"intermediate\" : item.allowAccess ? \"checked\" : \"unchecked\";\n    return(\n      <dnn-checkbox\n        use-intermediate\n        checked={checked}\n        onCheckedchange={e => this.handleUserChanged(e.detail, userPermission, permissionDefinition)}\n      >\n        <div slot=\"intermediateicon\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\"/></svg>\n        </div>\n        <div slot=\"uncheckedicon\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8z\"/></svg>\n        </div>\n        <span>{permissionDefinition.permissionName}</span>\n      </dnn-checkbox>\n    )\n  }\n  \n  private handleRoleChanged(\n    checked: \"checked\" | \"unchecked\" | \"intermediate\",\n    rolePermission: IRolePermission,\n    permissionDefinition: IPermissionDefinition\n  ): void {\n    switch (checked) {\n      case \"unchecked\":\n        this.permissions = {\n          ...this.permissions,\n          rolePermissions: [\n            ...this.permissions.rolePermissions.map(r => {\n              if (r.roleId != rolePermission.roleId){\n                return r;\n              }\n\n              const newRolePermission = Object.assign({}, r);\n              newRolePermission.permissions = [\n                ...newRolePermission.permissions.filter(p => p.permissionId != permissionDefinition.permissionId),\n                {\n                  allowAccess: false,\n                  fullControl: false,\n                  permissionCode: permissionDefinition.permissionCode,\n                  permissionId: permissionDefinition.permissionId,\n                  permissionKey: permissionDefinition.permissionKey,\n                  permissionName: permissionDefinition.permissionName,\n                  view: false,\n                },\n              ];\n              return newRolePermission;\n            }),\n          ],\n        };\n        break;\n      case \"checked\":\n        this.permissions = {\n          ...this.permissions,\n          rolePermissions: [\n            ...this.permissions.rolePermissions.map(r => {\n              if (r.roleId != rolePermission.roleId){\n                return r;\n              }\n\n              const newRolePermission = Object.assign({}, r);\n              newRolePermission.permissions = [\n                ...newRolePermission.permissions.filter(p => p.permissionId != permissionDefinition.permissionId),\n                {\n                  allowAccess: true,\n                  fullControl: false,\n                  permissionCode: permissionDefinition.permissionCode,\n                  permissionId: permissionDefinition.permissionId,\n                  permissionKey: permissionDefinition.permissionKey,\n                  permissionName: permissionDefinition.permissionName,\n                  view: false,\n                },\n              ];\n              return newRolePermission;\n            }),\n          ],\n        };\n        break;\n        case \"intermediate\":\n        this.permissions = {\n          ...this.permissions,\n          rolePermissions: [\n            ...this.permissions.rolePermissions.map(r => {\n              if (r.roleId != rolePermission.roleId){\n                return r;\n              }\n\n              const newRolePermission = Object.assign({}, r);\n              newRolePermission.permissions = [\n                ...newRolePermission.permissions.filter(p => p.permissionId != permissionDefinition.permissionId),\n              ];\n              return newRolePermission;\n            }),\n          ],\n        };\n        break;\n      default:\n        break;\n    }\n    this.permissionsChanged.emit(this.permissions);\n  }\n\n  private handleUserChanged(\n    checked: \"checked\" | \"unchecked\" | \"intermediate\",\n    userPermission: IUserPermission,\n    permissionDefinition: IPermissionDefinition\n  ): void {\n    switch (checked) {\n      case \"unchecked\":\n        this.permissions = {\n          ...this.permissions,\n          userPermissions: [\n            ...this.permissions.userPermissions.map(u => {\n              if (u.userId != userPermission.userId){\n                return u;\n              }\n\n              const newUserPermission = Object.assign({}, u);\n              newUserPermission.permissions = [\n                ...newUserPermission.permissions.filter(p => p.permissionId != permissionDefinition.permissionId),\n                {\n                  allowAccess: false,\n                  fullControl: false,\n                  permissionCode: permissionDefinition.permissionCode,\n                  permissionId: permissionDefinition.permissionId,\n                  permissionKey: permissionDefinition.permissionKey,\n                  permissionName: permissionDefinition.permissionName,\n                  view: false,\n                },\n              ];\n              return newUserPermission;\n            }),\n          ],\n        };\n        break;\n      case \"checked\":\n        this.permissions = {\n          ...this.permissions,\n          userPermissions: [\n            ...this.permissions.userPermissions.map(u => {\n              if (u.userId != userPermission.userId){\n                return u;\n              }\n\n              const newUserPermission = Object.assign({}, u);\n              newUserPermission.permissions = [\n                ...newUserPermission.permissions.filter(p => p.permissionId != permissionDefinition.permissionId),\n                {\n                  allowAccess: true,\n                  fullControl: false,\n                  permissionCode: permissionDefinition.permissionCode,\n                  permissionId: permissionDefinition.permissionId,\n                  permissionKey: permissionDefinition.permissionKey,\n                  permissionName: permissionDefinition.permissionName,\n                  view: false,\n                },\n              ];\n              return newUserPermission;\n            }),\n          ],\n        };\n        break;\n        case \"intermediate\":\n        this.permissions = {\n          ...this.permissions,\n          userPermissions: [\n            ...this.permissions.userPermissions.map(u => {\n              if (u.userId != userPermission.userId){\n                return u;\n              }\n\n              const newUserPermission = Object.assign({}, u);\n              newUserPermission.permissions = [\n                ...newUserPermission.permissions.filter(p => p.permissionId != permissionDefinition.permissionId),\n              ];\n              return newUserPermission;\n            }),\n          ],\n        };\n        break;\n      default:\n        break;\n    }\n    this.permissionsChanged.emit(this.permissions);\n  }\n\n  private removeRole(rolePermission: IRolePermission): void {\n    this.permissions = {\n      ...this.permissions,\n      rolePermissions: [\n        ...this.permissions.rolePermissions.filter(rp => rp.roleId != rolePermission.roleId),\n      ],\n    };\n    this.permissionsChanged.emit();\n  }\n\n  private removeUser(userPermission: IUserPermission): void {\n    this.permissions = {\n      ...this.permissions,\n      userPermissions: [\n        ...this.permissions.userPermissions.filter(up => up.userId != userPermission.userId),\n      ]\n    };\n    this.permissionsChanged.emit(this.permissions);\n  }\n\n  private handleQueryChanged(query: string): void {\n    this.userQuery = query;\n    if (query == undefined || query.length == 0){\n      this.userCollapsible.expanded = false;\n      this.pickedUser = undefined;\n      this.foundUsers = [];\n      return;\n    }\n    this.userSearchQueryChanged.emit(query);\n  }\n\n  private handleSearchUserFieldKeyDown(e: KeyboardEvent): void {\n    if (e.key != \"ArrowDown\"){\n      return;\n    }\n\n    e.preventDefault();\n    const firstButton = this.userCollapsible.querySelector(\"button\");\n    if (firstButton != undefined){\n      firstButton.focus();\n    }\n  }\n\n  private handleSearchedUserKeyDown(e: KeyboardEvent): void {\n    const button = e.target as HTMLButtonElement;\n    \n    switch(e.key) {\n      case \"ArrowDown\":\n        e.preventDefault();\n        const nextButton = button.nextElementSibling as HTMLButtonElement;\n        nextButton?.focus();\n        break;\n      case \"ArrowUp\":\n        e.preventDefault();\n        const previousButton = button.previousElementSibling as HTMLButtonElement;\n        previousButton?.focus();\n      break;\n      default:\n        break;\n    }\n  }\n\n  private handleUserPicked(searchedUser: ISearchedUser): void {\n    this.userQuery = searchedUser.displayName;\n    this.pickedUser = searchedUser;\n  }\n\n  private getFilteredUsers() {\n    return this.foundUsers.filter(fu => !this.permissions.userPermissions.some(up => up.userId == fu.userId))\n  }\n  \n  render() {\n    const filteredRoles = this.getRoles();\n    return (\n      <Host>\n        <div class=\"add-role-row\">\n          <div class=\"dropdown\">\n            <label>{this.resx.FilterByGroup} :</label>\n            <select\n              onChange={e => this.handleRoleGroupChanged(e.target as HTMLSelectElement)}\n            >\n              <option\n                value={-2}\n                selected={this.selectedRoleGroupId == -2}\n              >\n                {this.resx.AllRoles}\n              </option>\n              <option\n                value={-1}\n                selected={this.selectedRoleGroupId == -1}\n              >\n                {this.resx.GlobalRoles}\n              </option>\n              {this.roleGroups.map(roleGroup =>\n                <option\n                  value={roleGroup.id}\n                  selected={this.selectedRoleGroupId == roleGroup.id}\n                >\n                  {roleGroup.name}\n                </option>\n              )}\n            </select>\n          </div>\n            {filteredRoles && filteredRoles.length > 0 && [\n              <div class=\"dropdown\">\n                <label>{this.resx.SelectRole} :</label>\n                <select ref={el => this.roleDropDown = el}>\n                  {this.getRoles().map(role =>\n                    <option value={role.RoleId}\n                    >\n                      {role.RoleName}\n                    </option>\n                  )}\n                </select>\n              </div>,\n              <dnn-button\n              type=\"primary\"\n              onClick={() => this.addRole()}\n              >\n                {this.resx.Add}\n              </dnn-button>\n            ]\n          }\n        </div>\n        <table class=\"roles-table\">\n          <caption>{this.resx.RolePermissions}</caption>\n          <thead>\n            <tr>\n              <th>{this.resx.Role}</th>\n              {this.permissions.permissionDefinitions.map(permissionDefinition =>\n                <th>{permissionDefinition.permissionName}</th>\n              )}\n              <th>&nbsp;</th>\n            </tr>\n          </thead>\n          <tbody>\n            {this.permissions.rolePermissions.map(rolePermission =>\n              <tr>\n                <th>{rolePermission.roleName}</th>\n                {this.permissions.permissionDefinitions.map(permissionDefinition =>\n                  <td>\n                    {this.renderRoleCheckBox(rolePermission, permissionDefinition)}\n                  </td>\n                )}\n                <td>\n                  {!rolePermission.default &&\n                    <button\n                      onClick={() => this.removeRole(rolePermission)}\n                    >\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M14.59 8L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\"/></svg>\n                    </button>\n                  }\n                </td>\n              </tr>\n            )}\n          </tbody>\n        </table>\n        <div class=\"search-user\">\n          <div class=\"search-control\">\n            <dnn-searchbox\n              placeholder={this.resx.User}\n              debounced\n              onQueryChanged={e => this.handleQueryChanged(e.detail)}\n              onKeyDown={e => this.handleSearchUserFieldKeyDown(e)}\n              query={this.userQuery}\n            />\n            <dnn-collapsible ref={el => this.userCollapsible = el}>\n              <div class=\"dropdown\">\n                {this.getFilteredUsers().map(searchedUser =>\n                  <button\n                    onKeyDown={e => this.handleSearchedUserKeyDown(e)}\n                    onClick={() => this.handleUserPicked(searchedUser)}\n                  >\n                    {searchedUser.displayName}\n                  </button>\n                )}\n              </div>\n            </dnn-collapsible>\n          </div>\n          {this.pickedUser &&\n            <dnn-button\n              onClick={() => this.addUser()}\n            >\n              {this.resx.Add}\n            </dnn-button>\n          }\n        </div>\n        {this.permissions.userPermissions && this.permissions.userPermissions.length > 0 &&\n          <table class=\"users-table\">\n            <caption>{this.resx.UserPermissions}</caption>\n            <thead>\n              <tr>\n                <th>{this.resx.User}</th>\n                {this.permissions.permissionDefinitions.map(permissionDefinition =>\n                  <th>{permissionDefinition.permissionName}</th>\n                )}\n                <th>&nbsp;</th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.permissions.userPermissions.map(userPermission =>\n                <tr>\n                  <th>{userPermission.displayName}</th>\n                  {this.permissions.permissionDefinitions.map(permissionDefinition =>\n                    <td>\n                      {this.renderUserCheckBox(userPermission, permissionDefinition)}\n                    </td>\n                  )}\n                  <td>\n                    <button\n                      onClick={() => this.removeUser(userPermission)}\n                    >\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M14.59 8L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\"/></svg>\n                    </button>\n                </td>\n                </tr>\n              )}\n            </tbody>\n          </table>\n        }\n      </Host>\n    );\n  }\n}",":host {\n  position: relative;\n  display: flex;\n  justify-content: space-between;\n  --background-color: transparent;\n  --color: #333;\n  --border-size: 1px;\n  --border-color: grey;\n  --border-active-color: black;\n  --border-radius: var(--dnn-controls-radius, 5px);\n  --padding: var(--dnn-controls-padding, 5px);\n  --focus-color: var(--dnn-color-primary, blue);\n  input {\n    width:100%;\n    border: var(--border-size) solid var(--border-color);\n    outline: none;\n    border-radius: var(--border-radius);\n    padding: var(--padding);\n    padding-right: 32px;\n    transition: all 300ms ease-in-out;\n    &:focus, &:hover{\n      outline: none;\n      box-shadow: 0 0 2px 2px var(--focus-color);\n    }\n  }\n  svg{\n    position: absolute;\n    top:0;\n    right:0;\n    height: 100%;\n    transform: scale(0.7);\n    fill: var(--color);\n    outline: var(--color);\n    color: var(--color);\n    transition: all 300ms ease-in-out;\n  }\n  button{\n    background: transparent;\n    border: 0;\n    margin: 0;\n    padding: 0;\n    &:focus, &:hover{\n      svg{\n        fill: var(--focus-color);\n      outline: var(--focus-color);\n      color: var(--focus-color);\n      }\n    }\n  }\n}\n","import { Component, Host, h, Event, EventEmitter, Watch, Prop } from '@stencil/core';\nimport { Debounce } from '../../utilities/debounce';\n@Component({\n  tag: 'dnn-searchbox',\n  styleUrl: 'dnn-searchbox.scss',\n  shadow: true\n})\nexport class DnnSearchbox {\n\n  /**\n   * Sets the field placeholder text.\n   */\n  @Prop() placeholder?: string = \"\";\n\n  /**\n   * Debounces the queryChanged by 500ms.\n   */\n  @Prop() debounced: boolean = true;\n\n  /** Sets the query */\n  @Prop({mutable: true}) query: string = \"\";\n\n  /**\n   * Fires up each time the search query changes.\n   * The data passed is the new query.\n   */\n  @Event() queryChanged: EventEmitter<string>;\n\n  @Watch('query')\n  fireQueryChanged(){\n    if (this.debounced){\n      this.debouncedHandleQueryChanged();\n    }\n    else{\n      this.handleQueryChanged();\n    }\n  }\n  \n  private handleQueryChanged(){\n    this.queryChanged.emit(this.query);\n  }\n\n  @Debounce(500)\n  private debouncedHandleQueryChanged(){\n    this.handleQueryChanged();\n  }\n\n  render() {\n    return (\n      <Host>\n        <input type=\"text\" value={this.query}\n          placeholder={this.placeholder}\n          onInput={e => this.query = (e.target as HTMLInputElement).value}\n        />\n        {this.query !== \"\" ?\n          <button class=\"svg clear\"\n            onClick={() => this.query = \"\"}\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z\"/></svg>\n          </button>\n        :\n        <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"/></svg>\n        }\n      </Host>\n    );\n  }\n\n}\n",":host {\n  /**\n  * @prop --color: Normal Color of the inactive sort icon.\n  * @prop --color-sorted: Color of the sorted sort icon.\n  * @prop --color-hover: Color of the icons when hovered.\n  */\n  --color: #888;\n  --color-sorted: var(--dnn-color-primary, rgb(2,139,255));\n  --color-hover: var(--dnn-color-primary-light, #36a1ff);\n  \n  display: inline-block;\n}\n\nbutton {\n  outline: none;\n  border: none;\n  margin: 0;\n  padding: 0;\n  background-color: transparent;\n  outline: none;\n  display: inline-block;\n  line-height: 1em;\n  position: relative;\n  top: 0.25em;\n  svg{\n    height: 1.5em;\n    width: auto;\n    fill: var(--color);\n  }\n  &.active{\n    svg{\n      fill: var(--color-sorted);\n    }\n  }\n  &:hover, &:focus{\n    svg{\n      fill: var(--color-hover);\n    }\n  }\n}","import { Component, Host, h, Prop, Event, EventEmitter } from '@stencil/core';\n\n@Component({\n  tag: 'dnn-sort-icon',\n  styleUrl: 'dnn-sort-icon.scss',\n  shadow: true\n})\nexport class DnnSortIcon {\n  /** Defines the current sort direction */\n  @Prop() sortDirection: \"asc\" | \"desc\" | \"none\" = \"none\";\n\n  /** Emitted when the sort is changed. */\n  @Event() sortChanged!: EventEmitter<\"asc\"|\"desc\"|\"none\">;\n  \n  private changeSort(): void {\n    switch (this.sortDirection) {\n      case \"asc\":\n        this.sortDirection = \"desc\";\n        break;\n      case \"desc\":\n        this.sortDirection = \"asc\";\n        break;\n      case \"none\":\n        this.sortDirection = \"asc\";\n        break;\n      default:\n        break;\n    }\n\n    this.sortChanged.emit(this.sortDirection);\n  }\n\n  render() {\n    return (\n      <Host>\n        <button\n          class={{\"active\": this.sortDirection != \"none\"}}\n          onClick={() => this.changeSort()}\n        >\n          {this.sortDirection == \"none\" &&\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 12 16\"><path d=\"M 0 7 H 12 L 6 0 Z M 0 9 H 12 L 6 16 Z\"></path></svg>\n          }\n          {this.sortDirection == \"asc\" &&\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 12 16\"><path d=\"M 0 7 H 12 L 6 0 Z\"></path></svg>\n          }\n          {this.sortDirection == \"desc\" &&\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 12 16\"><path d=\"M 0 9 H 12 L 6 16 Z\"></path></svg>\n          }\n        </button>\n      </Host>\n    );\n  }\n}\n",null,"import { Component, Host, h, Prop, State, Method } from \"@stencil/core\";\r\n\r\n/** Represents a single tab and must be used inside a dnn-tabs element. */\r\n@Component({\r\n    tag: 'dnn-tab',\r\n    styleUrl: 'dnn-tab.scss',\r\n    shadow: true,\r\n})\r\nexport class DnnTab {\r\n    /** Defines the tab title. */\r\n    @Prop() tabTitle!: string;\r\n\r\n    @State() visible: boolean = false;\r\n\r\n    /** Shows the tab. */\r\n    @Method()\r\n    async show(){\r\n        this.visible = true;\r\n    }\r\n\r\n    /** Hides the modal */\r\n    @Method()\r\n    async hide(){\r\n        this.visible = false;\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Host>\r\n                {this.visible &&\r\n                    <slot></slot>\r\n                }\r\n            </Host>\r\n        );\r\n    }\r\n}",":host {\r\n    /**\r\n    * @prop --color-background: The color of the inactive tabs.\r\n    * @prop --color-text: The color of the text for inactive tabs.\r\n    * @prop --color-visible: The color of the active tab.\r\n    * @prop --color-visible-text: The color of the text for the active tab.\r\n    * @prop --color-focus: outline color when hovering or pre-selecting a tab.\r\n    */\r\n    display: block;\r\n    --color-background: var(--dnn-color-secondary-dark, lightgray);\r\n    --color-text: var(--dnn-color-secondary-contrast, #333);\r\n    --color-visible: var(--dnn-color-primary, #3792ED);\r\n    --color-visible-text: var(--dnn-color-primary-contrast, #FFF);\r\n    --color-focus: var(--dnn-color-primary, #3792ed);\r\n  }\r\n\r\n  .tabTitles{\r\n      display: flex;\r\n      background-color: var(--color-background);\r\n      color: var(--color-text);\r\n      button{\r\n          padding: 0.5rem 1rem;\r\n          border: 0;\r\n          margin: 0;\r\n          background-color: transparent;\r\n          &.visible{\r\n              background-color: var(--color-visible);\r\n              color: var(--color-bisible-text);\r\n          }\r\n          &:focus, &:hover{\r\n            outline: none;\r\n            box-shadow: 0 0 2px 2px var(--color-focus);\r\n          }\r\n      }\r\n  }\r\n\r\n  .currentTab{\r\n      border: 1px solid var(--color-background);\r\n      padding: 1rem;\r\n  }","import { Component, Host, h, State } from \"@stencil/core\";\r\n\r\n@Component({\r\n    tag: 'dnn-tabs',\r\n    styleUrl: 'dnn-tabs.scss',\r\n    shadow: true,\r\n})\r\nexport class DnnTabs {\r\n    private component: HTMLElement;\r\n\r\n    @State() tabTitles: string[] = [];\r\n    @State() selectedTabTitle: string = \"\";\r\n\r\n    componentDidLoad(){\r\n        requestAnimationFrame(() => {\r\n            this.updateTitles();\r\n            this.showFirstTab();\r\n        });\r\n    }\r\n\r\n    private getTabs() {\r\n        return this.component.shadowRoot.querySelector(\"slot\").assignedElements() as HTMLDnnTabElement[];\r\n    }\r\n\r\n    private updateTitles(){\r\n        const tabs = this.getTabs();\r\n        tabs.forEach(tab => this.tabTitles = [...this.tabTitles, tab.tabTitle]);\r\n    }\r\n\r\n    private showFirstTab(){\r\n        const tab = this.getTabs()[0];\r\n        tab.show();\r\n        this.selectedTabTitle = tab.tabTitle;\r\n    }\r\n\r\n    private showTab(tabTitle: string) {\r\n        const tabs = this.getTabs();\r\n        tabs.forEach(tab => {\r\n            if (tab.tabTitle == tabTitle){\r\n                tab.show();\r\n                return;\r\n            }\r\n\r\n            tab.hide();\r\n        });\r\n        this.selectedTabTitle = tabTitle;\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Host ref={el => this.component = el}>\r\n                <div class=\"tabTitles\">\r\n                    {this.tabTitles.map(tabTitle =>\r\n                        <button\r\n                            class={this.selectedTabTitle == tabTitle ? \"visible\": \"\"}\r\n                            onClick={() => this.showTab(tabTitle)}\r\n                        >\r\n                            {tabTitle}\r\n                        </button>\r\n                    )}\r\n                </div>\r\n                <div class=\"currentTab\">\r\n                    <slot></slot>\r\n                </div>\r\n            </Host>\r\n        );\r\n    }\r\n}",":host {\n    /**\n     * @prop --background: Background of the toggle.\n     * @prop --background-checked: Background of the toggle when checked.\n     * @prop --handle-background:  Background of the handle.\n     * @prop --handle-background-checked:  Background of the handle when checked.\n     * @prop --border-radius: The radius of the background borders.\n     * @prop --handle-border-radius: The radius of the handle.\n    */\n\n    display: inline-block;\n    outline: none;\n    cursor: pointer;\n}\n\nbutton {\n    height: 1.5em;\n    width: 2.5em;\n    outline: none;\n    background-color: var(--background, #888);\n    border: 0;\n    border-radius: var(--border-radius, var(--dnn-controls-radius, 0.75em));\n    padding: 0.1em;\n    position: relative;\n    margin: 0;\n    transition: background-color 300ms ease-in-out;\n    position: relative;\n    cursor: pointer;\n    &:hover, &:focus{\n        box-shadow: 0 0 2px 2px var(--dnn-color-primary);\n    }\n    &.checked{\n        background-color: var(--background-checked, var(--dnn-color-primary, blue));\n        .handle{\n            left: calc(1em + 4px);\n        }\n    }\n    &:disabled{\n        opacity: 0.5;\n        cursor: not-allowed;\n        box-shadow: none;\n    }\n    .handle{\n        transition: all 300ms ease-in-out;\n        background-color:white;\n        width: 1em;\n        height: 1em;\n        border-radius: var(--handle-border-radius, var(--dnn-controls-radius, 50%));\n        position: absolute;\n        top: calc(50% - 0.5em);\n        left: 2px;\n    }\n}","import { Component, h, Element, Prop, Event, EventEmitter, Watch, Host } from \"@stencil/core\";\nimport { DnnToggleChangeEventDetail } from \"./toggle-interface\";\n\n\n@Component({\n    tag: \"dnn-toggle\",\n    styleUrl: \"dnn-toggle.scss\",\n    shadow: true\n})\nexport class DnnToggle {\n\n    @Element() element: HTMLDnnToggleElement;\n\n    /** If 'true' the toggle is checked (on). */\n    @Prop({mutable: true}) checked = false;\n\n    /** If 'true' the toggle is not be interacted with. */\n    @Prop() disabled = false;\n\n    /** Fires when the toggle changed */\n    @Event() checkChanged!: EventEmitter<DnnToggleChangeEventDetail>;\n\n    @Watch(\"checked\")\n    checkedChanged(isChecked: boolean){\n        this.checkChanged.emit({checked: isChecked});\n    }\n\n    render() {\n        return (\n            <Host>\n                <button disabled={this.disabled} class={{'checked': this.checked}}\n                    onClick={() => {\n                        if (!this.disabled) {\n                            this.checked = !this.checked;\n                        }\n                    }}\n                >\n                    <div class=\"handle\"></div>\n                </button>\n            </Host>\n        );\n    }\n}\n",":host {\n  display: flex;\n  overflow: visible;\n}\n.expander{\n  width: 24px;\n  height: 24px;\n  button{\n    transition: all 150ms ease-in-out;\n    background-color:transparent;\n    border: none;\n    padding: 0;\n    margin: 0;\n    height: 1em;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n    position: relative;\n    top: 2px;\n    svg{\n      :first-child{\n        transition: all 150ms ease-in-out;\n        fill: white;\n        stroke: black\n      }\n    }\n  }\n  &.expanded{\n    button{\n      transform: rotate(45deg);\n      svg{\n        :first-child{\n          fill: black;\n          stroke: black;\n        }\n      }\n    }\n  }\n}\ndiv.item{\n  .item-slot{\n    display: flex;\n    align-items: center;\n    gap: 0.25em;\n    min-height: 24px;\n  }\n  div.children{\n    overflow: hidden;\n    height:0;\n    transition: all 150ms ease-in-out;\n  }\n}","import { Component, Host, h, Prop, State, Element, Event, EventEmitter, Watch } from '@stencil/core';\n\n/** \n * @slot - The content of this node.\n * @slot children - The content nested under this node.\n*/\n@Component({\n  tag: 'dnn-treeview-item',\n  styleUrl: 'dnn-treeview-item.scss',\n  shadow: true,\n})\nexport class DnnTreeviewItem {\n  \n  private expander!: HTMLDivElement;\n\n  @Element() el!: HTMLDnnTreeviewItemElement;\n  \n  /** Defines if the current node is expanded.  */\n  @Prop({mutable: true, reflect: true}) expanded: boolean = false;\n\n  /** Fires when the user expands a node. */\n  @Event({bubbles: false}) userExpanded: EventEmitter<void>;\n\n  /** Fires when the user collapses a node. */\n  @Event({bubbles: false}) userCollapsed: EventEmitter<void>;\n\n  /** Manages state for whether or not item has children. */\n  @State() hasChildren: boolean = false;\n\n  /** Watch expanded Prop */\n  @Watch('expanded')\n  watchExpanded(expanded: boolean) {\n    if (expanded) {\n      this.expander.classList.add(\"expanded\");\n      this.collapsible.expanded = true;\n      return;\n    }\n    \n    this.expander.classList.remove(\"expanded\");\n    this.collapsible.expanded = false;\n  }\n      \n  \n  private childElement!: HTMLDivElement;\n  private collapsible!: HTMLDnnCollapsibleElement;\n\n  componentDidLoad() {\n    requestAnimationFrame(() => {\n      const child = this.childElement.children[0] as HTMLSlotElement;\n      const count = child.assignedElements().length\n      if (count > 0){\n        this.hasChildren = true;\n      }\n      if (this.expanded){\n        this.expander.classList.add(\"expanded\");\n        this.collapsible.expanded = false;\n        setTimeout(() => {\n          this.collapsible.expanded = true;\n        }, 300);\n      }\n    });\n  }\n\n  private toggleCollapse(): void {\n    this.expanded = !this.expanded;\n    if (this.expanded){\n      this.expander.classList.add(\"expanded\");\n      this.userExpanded.emit();\n      return;\n    }\n\n    this.expander.classList.remove(\"expanded\");\n    this.userCollapsed.emit();\n  }\n\n  render() {\n    return (\n      <Host>\n        <div class=\"expander\" ref={el => this.expander = el}>\n          {this.hasChildren &&\n            <button\n              onClick={() => this.toggleCollapse()}\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M10 17l5-5-5-5v10z\"/><path d=\"M0 24V0h24v24H0z\" fill=\"none\"/></svg>\n            </button>\n          }\n        </div>\n        <div class=\"item\">\n          <div class=\"item-slot\">\n            <slot></slot>\n          </div>\n          <dnn-collapsible ref={el => this.collapsible = el} expanded={this.expanded}>\n            <div ref={el => this.childElement = el}>\n              <slot name=\"children\"></slot>\n            </div>\n          </dnn-collapsible>\n          </div>\n      </Host>\n    );\n  }\n}\n\nexport interface ExpandedToggledEvent{\n  state: \"expanded\" | \"collapsed\";\n  height: number;\n}",":host {\n  /**\n    * @prop --background-color:  Defines the menu background color.\n    * @prop --foreground-color: A color that contrasts with the background color.\n  */\n  --background-color: var(--dnn-color-primary-contrast, white);\n  --foreground-color: var(--dnn-color-primary, #3792ED);\n\n  display: block;\n}\n\n.menu-container{\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  background-color: var(--background-color);\n  .menu{\n    margin: 0.5em;\n    display: flex;\n    gap: 1em;\n    justify-content: flex-start;\n    align-items: center;\n    white-space: nowrap;\n    width: 100%;\n  }\n  .overflow {\n    margin-left: auto;\n    position: relative;\n    button{\n      cursor: pointer;\n      svg{\n        fill: var(--foreground-color);\n      }\n      padding: 0;\n      margin: 0;\n      background-color: transparent;\n      border: none;\n    }\n    .dropdown{\n      position:absolute;\n      display: flex;\n      flex-direction: column;\n      white-space: nowrap;\n      right: 0;\n      transition: 100ms ease-in-out;\n      height: 0;\n      overflow: hidden;\n      &.visible{\n        padding: 1em;\n        gap: 0.5em;\n        background-color: var(--background-color);\n        box-shadow: 2px 2px 4px rgba(0,0,0,0.7);\n      }\n    }\n  }\n}\n","import { Component, Element, Host, h, State } from '@stencil/core';\n\n@Component({\n  tag: 'dnn-vertical-overflow-menu',\n  styleUrl: 'dnn-vertical-overflow-menu.scss',\n  shadow: true,\n})\nexport class DnnVerticalOverflowMenu {\n\n  @Element() element!: HTMLDnnVerticalOverflowMenuElement;\n  \n  @State() showDropdownButton = false;\n  @State() showDropdownMenu = false;\n\n  private menu!: HTMLDivElement;\n  private dropdown: HTMLDivElement;\n  private resizeObserver: ResizeObserver;\n  private button!: HTMLButtonElement;\n  private previousMenuWidth = 0;\n\n  componentDidRender() {\n    requestAnimationFrame(() => {\n      this.moveItemsToDropDownIfNecessery();\n      this.resizeObserver = new ResizeObserver(entries => {\n        for (let entry of entries){\n          if (entry.contentRect.width < this.previousMenuWidth){\n            this.moveItemsToDropDownIfNecessery()\n          }\n          if (this.previousMenuWidth > 0 && entry.contentRect.width > this.previousMenuWidth){\n            this.moveItemsToMenuIfPossible();\n          }\n          this.previousMenuWidth = entry.contentRect.width;\n        }\n      });\n      this.resizeObserver.observe(this.element);\n    });\n  }\n\n  private moveItemsToDropDownIfNecessery(){\n    const menuItems = Array.from(this.menu.querySelector(\"slot\").assignedElements());\n    const availableWidth = this.menu.getBoundingClientRect().width;\n    let neededWidth = parseFloat(getComputedStyle(this.element).fontSize)*2;\n    menuItems.forEach(item => neededWidth += this.getFullWidth(item));\n    neededWidth += (menuItems.length - 1) * parseFloat(getComputedStyle(this.element).fontSize);\n    if (neededWidth > availableWidth){\n      this.showDropdownButton = true;\n      var lastItem = menuItems[menuItems.length -1];\n      if (this.dropdown == undefined){\n        return;\n      }\n      lastItem.slot = \"dropdown\";\n      this.moveItemsToDropDownIfNecessery();\n    }\n  }\n  \n  private moveItemsToMenuIfPossible(){\n    if (this.dropdown == undefined || !this.dropdown.hasChildNodes()){\n      return;\n    }\n    const menuItems = Array.from(this.menu.querySelector(\"slot\").assignedElements());\n    const availableWidth = this.menu.getBoundingClientRect().width;\n    let neededWidth = parseFloat(getComputedStyle(this.element).fontSize)*2;\n    neededWidth += (menuItems.length - 1) * parseFloat(getComputedStyle(this.element).fontSize);\n    menuItems.forEach(item => neededWidth += this.getFullWidth(item));\n    const firstItem = this.dropdown.querySelector(\"slot\").assignedElements()[0];\n    if (firstItem != undefined){\n      neededWidth += this.getFullWidth(firstItem);\n    }\n\n    if (neededWidth < availableWidth){\n      if (firstItem != undefined){\n        firstItem.slot = \"\";\n      }\n      if(firstItem == undefined){\n        this.dropdown.classList.remove(\"visible\");\n        this.showDropdownMenu = false;\n        this.showDropdownButton = false;\n      }\n    }    \n  }\n\n  private getFullWidth(item: Element) {\n    var width = item.getBoundingClientRect().width;\n    var styles = getComputedStyle(item);\n    width += parseFloat(styles.marginLeft);\n    width += parseFloat(styles.marginRight);\n    width += parseFloat(styles.paddingLeft);\n    width += parseFloat(styles.paddingRight);\n    return width;\n  }\n\n  private toggleOverflowMenu(): void {\n    this.showDropdownMenu = !this.showDropdownMenu;\n    if (this.showDropdownMenu){\n      this.dropdown.classList.add(\"visible\");\n      let contentHeight = 0;\n      const items = Array.from(this.dropdown.querySelector(\"slot\").assignedElements());\n      items.forEach(item => contentHeight += item.getBoundingClientRect().height);\n      const emHeight = parseFloat(getComputedStyle(this.dropdown).fontSize);\n      const gapsHeight = emHeight * (this.dropdown.children.length - 1) / 2;\n      contentHeight += gapsHeight;\n      const marginHeight = emHeight * 2;\n      contentHeight += marginHeight;\n      this.dropdown.style.height = `${contentHeight}px`;\n      const dismissMenu = (e: MouseEvent) => {\n        const buttonRect = this.button.getBoundingClientRect();\n        if (\n          e.clientX < buttonRect.left ||\n          e.clientX > buttonRect.right ||\n          e.clientY < buttonRect.top ||\n          e.clientY > buttonRect.bottom){\n            this.toggleOverflowMenu();\n          }\n          document.removeEventListener(\"click\", dismissMenu);\n      };\n      setTimeout(() => {\n        document.addEventListener(\"click\", dismissMenu, false);\n      }, 100);\n    }\n    else{\n      this.dropdown.classList.remove(\"visible\");\n      this.dropdown.style.height = \"0px\";\n    }\n  }\n\n  render() {\n    return (\n      <Host>\n        <div class=\"menu-container\">\n          <div class=\"menu\" ref={el => this.menu = el}>\n            <slot></slot>\n          </div>\n            {this.showDropdownButton &&\n              <div class=\"overflow\">\n                <button\n                  ref={el => this.button = el}\n                  class=\"icon\"\n                  onClick={() => this.toggleOverflowMenu()}>\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\"/></svg>\n                </button>\n                <div class=\"dropdown\" ref={el => this.dropdown = el}>\n                  <slot name=\"dropdown\"></slot>\n                </div>\n              </div>\n            }\n          </div>\n      </Host>\n    );\n  }\n}\n",":host {\n    /**\n      * @prop --left-pane-background-color:  Allows customizing the left pane background-color\n      * @prop --right-pane-background-color: Allows customizing the right pane background-color\n    */\n\n    display: flex;\n    align-items: stretch;\n    margin: 0 auto;\n    position: relative;\n\n    --left-pane-background-color: transparent;\n    --right-pane-background-color: transparent;\n}\n\nbutton{\n  border: none;\n  margin:0;\n  padding:0;\n  cursor: ew-resize;\n  position: absolute;\n  height: 100%;\n  background-color: transparent;\n  &.transition{\n    transition: all 300ms ease-in-out;\n  }\n}\n\n\n.pane{\n  overflow-y: auto;\n  &.transition{\n    transition: all 300ms ease-in-out;\n  }\n  &.left{\n    background-color: var(--left-pane-background-color);\n  }\n  &.right{\n    background-color: var(--right-pane-background-color);\n    flex-grow: 1;\n  }\n}","import { Component, Host, h, Prop, Element, State, Method, Event, EventEmitter } from '@stencil/core';\nimport { getMovementFromEvent } from \"../../utilities/mouseUtilities\";\n\n/**\n * @slot default - The split divider control you want to use.\n * @slot left - The content of the left pane.\n * @slot right - The content of the right pane.\n */\n@Component({\n  tag: 'dnn-vertical-splitview',\n  styleUrl: 'dnn-vertical-splitview.scss',\n  shadow: true,\n})\nexport class DnnVerticalSplitview {\n\n  /** The width of the splitter area. */\n  @Prop() splitterWidth = 16;\n\n  /** The percentage position of the splitter in the container. */\n  @Prop({mutable: true}) splitWidthPercentage = 30;\n  \n  private splitter!: HTMLButtonElement;\n\n  private resizeObserver: ResizeObserver;\n\n  /** Sets the width percentage of the divider */\n  @Method()\n  async setSplitWidthPercentage(newWidth: number) {\n    const panes = this.element.shadowRoot.querySelectorAll(\".pane\");\n    requestAnimationFrame(() => {\n      panes.forEach(pane => pane.classList.add(\"transition\"));\n      this.splitter.classList.add(\"transition\");\n      requestAnimationFrame(() => {\n        const fullWidth = this.element.getBoundingClientRect().width;\n        let newLeft = fullWidth * newWidth / 100;\n        if (newLeft < 0){\n          newLeft = 0;\n        }\n        if (newLeft > fullWidth){\n          newLeft = fullWidth;\n        }\n        this.leftWidth = newLeft;\n        this.rightWidth = fullWidth - newLeft;\n        setTimeout(() => {\n          panes.forEach(pane => pane.classList.remove(\"transition\"));\n          this.splitter.classList.remove(\"transition\");\n        }, 300);\n      });\n    });\n  }\n\n  /** Gets the current divider position percentage. */\n  @Method()\n  async getSplitWidthPercentage(){\n    const fullWidth = this.element.getBoundingClientRect().width;\n    return this.leftWidth / fullWidth;\n  }\n\n  /** Fires when the width of the divider changes. */\n  @Event() widthChanged: EventEmitter<number>;\n\n  @State() leftWidth = 0;\n  @State() rightWidth = 0;\n\n  @Element() element : HTMLDnnVerticalSplitviewElement;\n  \n  componentDidLoad() {\n    requestAnimationFrame(() => {\n      this.resizeObserver = new ResizeObserver(() => {\n        const fullWidth = this.element.getBoundingClientRect().width;\n        this.leftWidth = fullWidth * this.splitWidthPercentage / 100;\n        this.rightWidth = fullWidth - this.leftWidth;\n        this.widthChanged.emit(this.splitWidthPercentage);\n      });\n      this.resizeObserver.observe(this.element);\n    });\n  }\n  \n  private previousTouch: Touch;\n\n  private handleMouseDown(event: MouseEvent | TouchEvent) {\n    event.preventDefault();\n    const handleDrag = (ev: MouseEvent | TouchEvent) => {\n      requestAnimationFrame(() => {\n        let fullWidth = this.element.getBoundingClientRect().width;\n        let {movementX} = getMovementFromEvent(ev, this.previousTouch);\n        let newLeft = this.leftWidth + movementX;\n        if (newLeft < 0){\n          newLeft = 0;\n        }\n        if (newLeft > fullWidth){\n          newLeft = fullWidth;\n        }\n        this.leftWidth = newLeft;\n        this.rightWidth = fullWidth - newLeft;\n        this.splitWidthPercentage = this.leftWidth / fullWidth * 100;\n      });\n    }\n    const handleDragFinished = () => {\n      document.removeEventListener(\"mousemove\", handleDrag);\n      document.removeEventListener(\"touchmove\", handleDrag);\n      const fullWidth = this.element.getBoundingClientRect().width;\n      const newPercentage = this.leftWidth / fullWidth * 100;\n      this.widthChanged.emit(newPercentage);\n    };\n    document.addEventListener(\"mouseup\", handleDragFinished);\n    document.addEventListener(\"touchend\", handleDragFinished);\n    document.addEventListener(\"mousemove\", handleDrag);\n    document.addEventListener(\"touchmove\", handleDrag);\n  }\n\n  private handleKeyDown(e: KeyboardEvent): void {\n    let movementX = 0;\n    switch (e.key) {\n      case \"ArrowLeft\":\n        movementX = -10;\n        break;\n      case \"ArrowRight\":\n        movementX = 10;\n        break;\n      default:\n        return;\n    }\n    if (e.shiftKey){\n      movementX = movementX * 10;\n    }\n    const fullWidth = this.element.getBoundingClientRect().width;\n    let newLeft = this.leftWidth + movementX;\n    if (newLeft < 0){\n      newLeft = 0;\n    }\n    if (newLeft > fullWidth){\n      newLeft = fullWidth;\n    }\n    this.leftWidth = newLeft;\n    this.rightWidth = fullWidth - this.leftWidth;\n  }\n\n  render() {\n    return (\n      <Host>\n          <div class=\"left pane\" style={{\n              width: `${this.leftWidth}px`,\n            }}>\n            <slot name=\"left\"></slot>\n          </div>\n          <button\n            onMouseDown={e => this.handleMouseDown(e)}\n            onTouchStart={e => this.handleMouseDown(e)}\n            onKeyDown={e => this.handleKeyDown(e)}\n            ref={el => this.splitter = el}\n            style={{\n              minWidth: `${this.splitterWidth.toString()}px`,\n              left: `${this.leftWidth - 2}px`,\n            }}\n          >\n            <slot></slot>\n          </button>\n          <div\n            class=\"right pane\"\n            style={{\n              width: `${this.rightWidth}px`,\n            }}>\n            <slot name=\"right\"></slot>\n          </div>\n      </Host>\n    );\n  }\n}\n"]}